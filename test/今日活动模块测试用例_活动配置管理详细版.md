# 今日活动模块测试用例 - 活动配置管理详细版

## 二、活动配置管理功能（全面覆盖版）

### 2.1 配置管理器打开和关闭

#### P0 TC-019: 打开配置管理器 - 基本功能
**测试步骤：**
1. 打开抽卡模态框
2. 点击设置图标（⚙️）

**预期结果：**
- 打开活动配置管理器
- 显示配置管理界面
- 左侧显示一级分类列表
- 右侧显示选中分类的二级活动项列表
- 显示统计信息（X个分类，共X个活动）

#### P0 TC-020: 关闭配置管理器 - 点击关闭按钮
**测试步骤：**
1. 打开配置管理器
2. 点击右上角关闭按钮（✕）

**预期结果：**
- 配置管理器关闭
- 返回抽卡模态框
- 配置已保存（如果有修改）

#### P1 TC-021: 关闭配置管理器 - 点击外部遮罩
**测试步骤：**
1. 打开配置管理器
2. 点击外部遮罩区域

**预期结果：**
- 配置管理器关闭
- 返回抽卡模态框

#### P1 TC-022: 关闭配置管理器 - ESC键退出
**测试步骤：**
1. 打开配置管理器
2. 按ESC键

**预期结果：**
- 配置管理器关闭
- 事件不传播到抽卡模态框（不会同时关闭抽卡模态框）

#### P2 TC-023: 关闭配置管理器 - 编辑状态下关闭
**测试步骤：**
1. 打开配置管理器
2. 进入编辑模式（编辑分类或活动项）
3. 点击关闭按钮

**预期结果：**
- 配置管理器关闭
- 编辑状态被取消
- 未保存的修改丢失

### 2.2 一级分类管理功能

#### 2.2.1 添加一级分类

#### P0 TC-024: 添加分类 - 基本功能
**测试步骤：**
1. 打开配置管理器
2. 点击左侧"➕"按钮（新增分类）
3. 观察新分类

**预期结果：**
- 新增一个分类
- 默认名称为"分类"（如果已存在则为"分类1"、"分类2"等）
- 分类类型为CUSTOM（自定义）
- 默认概率为0%
- 默认选中新创建的分类
- 显示成功提示："新增成功！"
- 统计信息更新

#### P1 TC-025: 添加分类 - 名称自动递增
**测试步骤：**
1. 已有"分类"分类
2. 再次点击添加分类
3. 观察新分类名称

**预期结果：**
- 新分类名称为"分类1"
- 如果"分类1"也存在，则为"分类2"，以此类推
- 自动避免重名

#### P1 TC-026: 添加分类 - 达到数量上限
**测试步骤：**
1. 已有20个分类
2. 尝试添加第21个分类

**预期结果：**
- 显示错误提示："一级分类最多只能创建20个，无法继续添加"
- 不创建新分类
- 列表保持不变

#### P2 TC-027: 添加分类 - 空配置时添加
**测试步骤：**
1. 清空所有分类（如果可能）
2. 添加第一个分类

**预期结果：**
- 成功创建分类
- 自动选中新分类
- 右侧显示空的活动项列表

#### 2.2.2 编辑一级分类

#### P0 TC-028: 编辑分类名称 - 基本功能
**测试步骤：**
1. 点击分类的编辑按钮（✏️）
2. 修改名称为"测试分类"
3. 点击保存按钮（💾）

**预期结果：**
- 进入编辑模式
- 显示输入框和概率输入框
- 名称更新成功
- 退出编辑模式
- 显示成功提示："保存成功！"
- 配置已保存到localStorage

#### P0 TC-029: 编辑分类名称 - Ctrl+Enter快捷键保存
**测试步骤：**
1. 进入编辑模式
2. 修改名称
3. 按Ctrl+Enter

**预期结果：**
- 等同于点击保存按钮
- 保存成功
- 退出编辑模式

#### P1 TC-030: 编辑分类名称 - 取消编辑
**测试步骤：**
1. 进入编辑模式
2. 修改名称
3. 点击取消按钮（❌）

**预期结果：**
- 名称恢复为原始值
- 退出编辑模式
- 未保存的修改丢失

#### P1 TC-031: 编辑分类名称 - 空名称
**测试步骤：**
1. 进入编辑模式
2. 删除所有内容
3. 尝试保存

**预期结果：**
- 如果名称为空，可能允许保存（取决于实现）
- 或显示错误提示

#### P1 TC-032: 编辑分类名称 - 名称长度限制（4个字）
**测试步骤：**
1. 进入编辑模式
2. 输入5个字符的名称
3. 尝试保存

**预期结果：**
- 显示错误提示："分类名称不能超过4个字"
- 不允许保存
- 输入框有maxLength限制（4）

#### P1 TC-033: 编辑分类名称 - 名称重复验证
**测试步骤：**
1. 已有"测试分类"
2. 编辑另一个分类，改名为"测试分类"
3. 尝试保存

**预期结果：**
- 显示错误提示："分类名称"测试分类"已存在，请使用其他名称"
- 不允许保存
- 名称保持不变

#### P1 TC-034: 编辑分类名称 - 名称前后空格处理
**测试步骤：**
1. 进入编辑模式
2. 输入"  测试分类  "
3. 保存

**预期结果：**
- 保存时自动trim处理
- 保存为"测试分类"（无前后空格）

#### P1 TC-035: 编辑分类概率 - 基本功能
**测试步骤：**
1. 进入编辑模式
2. 修改概率为30
3. 保存

**预期结果：**
- 概率更新为30%
- 自定义分类的概率自动调整（如果存在）
- 保存成功

#### P1 TC-036: 编辑分类概率 - 输入范围限制
**测试步骤：**
1. 进入编辑模式
2. 尝试输入负数或超过100的值

**预期结果：**
- 输入框限制：min="0" max="100"
- 负数自动变为0
- 超过100的值自动变为100
- step="5"（步长为5）

#### P1 TC-037: 编辑分类概率 - 自定义分类概率自动计算
**测试步骤：**
1. 有多个非自定义分类
2. 修改某个分类的概率
3. 观察"自定义"分类的概率

**预期结果：**
- 自定义分类概率 = 1 - 其他分类概率总和
- 如果其他分类概率总和超过1，自定义分类概率为负数（显示红色警告）
- 自动更新，无需手动设置

#### P1 TC-038: 编辑分类概率 - 概率总和超过100%
**测试步骤：**
1. 有多个分类
2. 将所有非自定义分类的概率总和设为超过100%
3. 保存

**预期结果：**
- 自定义分类概率变为负数
- 显示红色警告样式（negative类）
- 允许保存（但概率不匹配）

#### P2 TC-039: 编辑分类概率 - 概率为0
**测试步骤：**
1. 编辑分类概率
2. 设置为0
3. 保存

**预期结果：**
- 概率更新为0%
- 该分类在抽卡时不会被选中（如果过滤空分类）
- 保存成功

#### P2 TC-040: 编辑分类概率 - 概率为100%
**测试步骤：**
1. 只有一个非自定义分类
2. 设置该分类概率为100%
3. 保存

**预期结果：**
- 概率更新为100%
- 自定义分类概率为0%
- 保存成功

#### 2.2.3 删除一级分类

#### P0 TC-041: 删除分类 - 基本功能
**测试步骤：**
1. 选择一个分类
2. 点击删除按钮（🗑️）
3. 确认删除

**预期结果：**
- 显示确认对话框："确定要删除"XXX"分类吗？该分类下的 X 个活动也将被删除。"
- 确认后分类被删除
- 该分类下的所有活动项也被删除
- 自定义分类的概率自动调整
- 显示成功提示："删除成功！"
- 如果删除的是当前选中分类，自动选中第一个分类

#### P1 TC-042: 删除分类 - 取消删除
**测试步骤：**
1. 点击删除按钮
2. 在确认对话框中点击取消

**预期结果：**
- 分类未被删除
- 列表保持不变
- 活动项保持不变

#### P1 TC-043: 删除分类 - 删除空分类
**测试步骤：**
1. 选择一个没有活动项的分类
2. 删除该分类

**预期结果：**
- 确认对话框显示："确定要删除"XXX"分类吗？"
- 不显示活动项数量信息
- 删除成功

#### P1 TC-044: 删除分类 - 删除当前选中分类
**测试步骤：**
1. 选中某个分类
2. 删除该分类

**预期结果：**
- 分类被删除
- 自动选中第一个分类（如果还有分类）
- 如果没有分类了，右侧显示空状态提示

#### P1 TC-045: 删除分类 - 删除后概率重新计算
**测试步骤：**
1. 有多个分类，总概率为100%
2. 删除一个分类
3. 观察自定义分类的概率

**预期结果：**
- 自定义分类概率自动调整
- 确保总概率仍为100%（如果其他分类概率不变）

#### P1 TC-046: 删除分类 - 删除最后一个分类
**测试步骤：**
1. 只有一个分类（非自定义）
2. 尝试删除

**预期结果：**
- 可以删除
- 删除后列表为空
- 右侧显示空状态提示："请先在左侧选择或创建一个分类"

#### P2 TC-047: 删除分类 - 删除自定义分类（如果允许）
**测试步骤：**
1. 尝试删除"自定义"分类

**预期结果：**
- 根据实现，可能不允许删除（没有删除按钮）
- 或允许删除但会重新创建

### 2.3 二级活动项管理功能

#### 2.3.1 添加二级活动项

#### P0 TC-048: 添加活动项 - 基本功能
**测试步骤：**
1. 选择一个分类
2. 点击右侧"➕"按钮（新增活动）
3. 观察新活动项

**预期结果：**
- 新增一个活动项
- 默认名称为"新活动"（如果已存在则为"新活动1"、"新活动2"等）
- 默认概率为0%
- 显示在对应分类下
- 显示成功提示："新增成功！"
- 统计信息更新

#### P1 TC-049: 添加活动项 - 未选择分类
**测试步骤：**
1. 未选择任何分类（如果可能）
2. 尝试添加活动项

**预期结果：**
- 显示错误提示："请先选择一个分类"
- 不创建活动项

#### P1 TC-050: 添加活动项 - 名称自动递增
**测试步骤：**
1. 分类下已有"新活动"
2. 再次添加活动项

**预期结果：**
- 新活动项名称为"新活动1"
- 如果"新活动1"也存在，则为"新活动2"，以此类推

#### P1 TC-051: 添加活动项 - 达到数量上限（20个）
**测试步骤：**
1. 分类下已有20个活动项
2. 尝试添加第21个活动项

**预期结果：**
- 显示错误提示："每个一级分类下的二级分类最多只能创建20个"
- 不创建新活动项
- 列表保持不变

#### P1 TC-052: 添加活动项 - 自定义分类下添加
**测试步骤：**
1. 选择"自定义"分类
2. 尝试添加活动项

**预期结果：**
- 不显示添加按钮（根据实现）
- 或允许添加但有限制

#### P2 TC-053: 添加活动项 - 空分类下添加
**测试步骤：**
1. 创建一个新分类（没有活动项）
2. 添加第一个活动项

**预期结果：**
- 成功创建活动项
- 显示在列表中

#### 2.3.2 编辑二级活动项

#### P0 TC-054: 编辑活动项名称 - 基本功能
**测试步骤：**
1. 点击活动项的编辑按钮（✏️）
2. 修改名称为"测试活动"
3. 点击保存按钮（💾）

**预期结果：**
- 进入编辑模式
- 显示输入框和概率输入框
- 名称更新成功
- 退出编辑模式
- 显示成功提示："保存成功！"
- 配置已保存

#### P0 TC-055: 编辑活动项名称 - Ctrl+Enter快捷键保存
**测试步骤：**
1. 进入编辑模式
2. 修改名称
3. 按Ctrl+Enter

**预期结果：**
- 等同于点击保存按钮
- 保存成功
- 退出编辑模式

#### P1 TC-056: 编辑活动项名称 - 取消编辑
**测试步骤：**
1. 进入编辑模式
2. 修改名称
3. 点击取消按钮（❌）

**预期结果：**
- 名称恢复为原始值
- 退出编辑模式
- 未保存的修改丢失

#### P1 TC-057: 编辑活动项名称 - 空名称
**测试步骤：**
1. 进入编辑模式
2. 删除所有内容
3. 尝试保存

**预期结果：**
- 显示错误提示："活动名称不能为空"
- 不允许保存
- 保持在编辑模式

#### P1 TC-058: 编辑活动项名称 - 名称长度限制（5个字）
**测试步骤：**
1. 进入编辑模式
2. 输入6个字符的名称
3. 尝试保存

**预期结果：**
- 显示错误提示："活动名称不能超过5个字"
- 不允许保存
- 输入框有maxLength限制（5）

#### P1 TC-059: 编辑活动项名称 - 同分类内名称重复验证
**测试步骤：**
1. 分类下已有"测试活动"
2. 编辑另一个活动项，改名为"测试活动"
3. 尝试保存

**预期结果：**
- 显示错误提示："活动名称"测试活动"已存在于当前分类中，请使用其他名称"
- 不允许保存
- 名称保持不变

#### P1 TC-060: 编辑活动项名称 - 跨分类名称可以重复
**测试步骤：**
1. 分类A下有"测试活动"
2. 编辑分类B下的活动项，改名为"测试活动"
3. 保存

**预期结果：**
- 允许保存（不同分类下可以重名）
- 保存成功

#### P1 TC-061: 编辑活动项名称 - 名称前后空格处理
**测试步骤：**
1. 进入编辑模式
2. 输入"  测试活动  "
3. 保存

**预期结果：**
- 保存时自动trim处理
- 保存为"测试活动"（无前后空格）

#### P1 TC-062: 编辑活动项概率 - 基本功能
**测试步骤：**
1. 进入编辑模式
2. 修改概率为25
3. 保存

**预期结果：**
- 概率更新为25%
- 保存成功
- 分类概率显示可能不匹配（如果活动项概率总和≠分类概率）

#### P1 TC-063: 编辑活动项概率 - 输入范围限制
**测试步骤：**
1. 进入编辑模式
2. 尝试输入负数或超过100的值

**预期结果：**
- 输入框限制：min="0" max="100"
- 负数自动变为0
- 超过100的值自动变为100
- step="1"（步长为1）

#### P1 TC-064: 编辑活动项概率 - 概率总和超过分类概率
**测试步骤：**
1. 分类概率为30%
2. 分类下有2个活动项，每个概率设为20%
3. 保存

**预期结果：**
- 允许保存（不强制验证）
- 显示概率不匹配警告（红色样式）
- 分类显示：30% (40%) 红色提示

#### P1 TC-065: 编辑活动项概率 - 概率总和小于分类概率
**测试步骤：**
1. 分类概率为30%
2. 分类下有2个活动项，每个概率设为10%
3. 保存

**预期结果：**
- 允许保存
- 显示概率不匹配警告
- 分类显示：30% (20%) 红色提示

#### P2 TC-066: 编辑活动项概率 - 概率为0
**测试步骤：**
1. 编辑活动项概率
2. 设置为0
3. 保存

**预期结果：**
- 概率更新为0%
- 该活动项在抽卡时不会被选中
- 保存成功

#### P2 TC-067: 编辑活动项概率 - 概率为100%
**测试步骤：**
1. 分类下只有一个活动项
2. 设置该活动项概率为100%
3. 保存

**预期结果：**
- 概率更新为100%
- 保存成功

#### 2.3.3 删除二级活动项

#### P0 TC-068: 删除活动项 - 基本功能
**测试步骤：**
1. 选择一个活动项
2. 点击删除按钮（🗑️）
3. 确认删除

**预期结果：**
- 显示确认对话框："确定要删除"XXX"活动吗？"
- 确认后活动项被删除
- 显示成功提示："删除成功！"
- 列表更新

#### P1 TC-069: 删除活动项 - 取消删除
**测试步骤：**
1. 点击删除按钮
2. 在确认对话框中点击取消

**预期结果：**
- 活动项未被删除
- 列表保持不变

#### P1 TC-070: 删除活动项 - 删除正在编辑的活动项
**测试步骤：**
1. 进入编辑模式
2. 点击删除按钮
3. 确认删除

**预期结果：**
- 活动项被删除
- 自动退出编辑模式
- 编辑状态清除

#### P1 TC-071: 删除活动项 - 删除最后一个活动项
**测试步骤：**
1. 分类下只有一个活动项
2. 删除该活动项

**预期结果：**
- 活动项被删除
- 分类下活动项列表为空
- 分类概率保持不变（但活动项概率总和为0）

#### P1 TC-072: 删除活动项 - 自定义分类下的活动项
**测试步骤：**
1. 选择"自定义"分类
2. 尝试删除活动项

**预期结果：**
- 不显示删除按钮（根据实现）
- 或不允许删除

#### P2 TC-073: 删除活动项 - 删除后概率重新计算
**测试步骤：**
1. 分类下有多个活动项，概率总和等于分类概率
2. 删除一个活动项
3. 观察概率显示

**预期结果：**
- 活动项被删除
- 剩余活动项概率总和可能≠分类概率
- 显示概率不匹配警告

### 2.4 分类选择功能

#### P1 TC-074: 选择分类 - 基本功能
**测试步骤：**
1. 打开配置管理器
2. 点击左侧某个分类

**预期结果：**
- 分类被选中（高亮显示）
- 右侧显示该分类下的活动项列表
- 显示分类名称和活动项数量

#### P1 TC-075: 选择分类 - 切换分类
**测试步骤：**
1. 选中分类A
2. 点击分类B

**预期结果：**
- 分类B被选中
- 分类A取消选中
- 右侧显示分类B的活动项

#### P1 TC-076: 选择分类 - 编辑状态下切换分类
**测试步骤：**
1. 进入编辑模式（编辑分类或活动项）
2. 点击另一个分类

**预期结果：**
- 切换分类成功
- 编辑状态被取消
- 未保存的修改丢失

#### P2 TC-077: 选择分类 - 空分类选择
**测试步骤：**
1. 选择一个没有活动项的分类

**预期结果：**
- 分类被选中
- 右侧显示空的活动项列表
- 显示"X 个活动"（0个）

### 2.5 概率自动平衡功能

#### 2.5.1 全局自动平衡

#### P0 TC-078: 全局自动平衡 - 基本功能
**测试步骤：**
1. 打开配置管理器
2. 修改多个分类的概率
3. 点击右上角"⚖️"按钮（自动平衡所有概率）

**预期结果：**
- 所有分类概率平均分配
- 每个分类下的活动项概率也平均分配
- 总概率为100%
- 显示成功提示："自动平衡成功！"
- 配置已保存

#### P1 TC-079: 全局自动平衡 - 概率分配算法
**测试步骤：**
1. 有3个分类
2. 执行全局自动平衡
3. 观察概率分配

**预期结果：**
- 每个分类概率：100 / 3 = 33.33...%
- 实际分配：前1个分类34%，后2个分类33%（或类似分配）
- 确保总和为100%

#### P1 TC-080: 全局自动平衡 - 分类下活动项分配
**测试步骤：**
1. 有2个分类，每个分类有3个活动项
2. 执行全局自动平衡

**预期结果：**
- 每个分类概率：50%
- 每个分类下的活动项概率：50% / 3 = 16.66...%
- 实际分配：前1个活动项17%，后2个活动项16%（或类似分配）
- 确保总和等于分类概率

#### P1 TC-081: 全局自动平衡 - 空分类处理
**测试步骤：**
1. 有分类但没有活动项
2. 执行全局自动平衡

**预期结果：**
- 分类概率正常分配
- 空分类的活动项概率为0（或忽略）

#### P1 TC-082: 全局自动平衡 - 单个分类
**测试步骤：**
1. 只有1个分类
2. 执行全局自动平衡

**预期结果：**
- 该分类概率为100%
- 活动项概率平均分配

#### P2 TC-083: 全局自动平衡 - 自定义分类处理
**测试步骤：**
1. 有多个分类（包括自定义分类）
2. 执行全局自动平衡

**预期结果：**
- 自定义分类也参与平均分配
- 或自定义分类概率自动计算（取决于实现）

#### 2.5.2 分类内自动平衡

#### P0 TC-084: 分类内自动平衡 - 基本功能
**测试步骤：**
1. 选择一个分类
2. 修改该分类下多个活动项的概率
3. 点击右侧"⚖️"按钮（自动平衡该分类下的活动概率）

**预期结果：**
- 该分类下的活动项概率平均分配
- 活动项概率总和等于分类概率
- 显示成功提示："自动平衡成功！"
- 配置已保存

#### P1 TC-085: 分类内自动平衡 - 概率分配算法
**测试步骤：**
1. 分类概率为30%
2. 分类下有3个活动项
3. 执行分类内自动平衡

**预期结果：**
- 每个活动项概率：30% / 3 = 10%
- 实际分配：前0个活动项11%，后3个活动项10%（或类似分配）
- 确保总和为30%

#### P1 TC-086: 分类内自动平衡 - 单个活动项
**测试步骤：**
1. 分类下只有1个活动项
2. 执行分类内自动平衡

**预期结果：**
- 该活动项概率等于分类概率
- 保存成功

#### P1 TC-087: 分类内自动平衡 - 空分类
**测试步骤：**
1. 选择没有活动项的分类
2. 尝试执行分类内自动平衡

**预期结果：**
- 显示提示："当前分类没有活动项，请先添加活动"
- 不执行平衡操作

#### P1 TC-088: 分类内自动平衡 - 自定义分类
**测试步骤：**
1. 选择"自定义"分类
2. 尝试执行分类内自动平衡

**预期结果：**
- 不显示自动平衡按钮（根据实现）
- 或允许执行但有限制

#### P2 TC-089: 分类内自动平衡 - 概率为0的分类
**测试步骤：**
1. 分类概率为0%
2. 分类下有多个活动项
3. 执行分类内自动平衡

**预期结果：**
- 所有活动项概率为0%
- 保存成功

### 2.6 概率验证和显示

#### P1 TC-090: 概率显示 - 分类概率显示
**测试步骤：**
1. 查看分类列表
2. 观察概率显示

**预期结果：**
- 显示格式：XX%（XX%）
- 第一个XX%是分类概率
- 括号内是活动项概率总和
- 如果两者不匹配，显示红色警告样式

#### P1 TC-091: 概率显示 - 负数概率警告
**测试步骤：**
1. 修改分类概率，使自定义分类概率为负数
2. 观察显示

**预期结果：**
- 负数概率显示红色（negative类）
- 明显标识异常状态

#### P1 TC-092: 概率显示 - 概率不匹配警告
**测试步骤：**
1. 分类概率为30%
2. 活动项概率总和为40%
3. 观察显示

**预期结果：**
- 显示：30% (40%)
- 括号内显示红色（mismatch类）
- 提示概率不匹配

#### P1 TC-093: 概率显示 - 概率匹配正常显示
**测试步骤：**
1. 分类概率为30%
2. 活动项概率总和也为30%
3. 观察显示

**预期结果：**
- 显示：30% (30%)
- 正常颜色显示
- 无警告样式

#### P2 TC-094: 概率计算 - 浮点数精度处理
**测试步骤：**
1. 设置多个分类概率
2. 观察总概率计算

**预期结果：**
- 使用容差0.001进行判断
- 浮点数误差不影响显示
- 概率总和接近100%时显示正常

### 2.7 重置配置功能

#### P0 TC-095: 重置配置 - 基本功能
**测试步骤：**
1. 打开配置管理器
2. 修改一些配置
3. 点击右上角"🔄"按钮（重置为默认）
4. 确认重置

**预期结果：**
- 显示确认对话框："确定要重置为默认配置吗？\n\n所有自定义设置将丢失且无法恢复！"
- 确认后配置恢复为默认值
- 所有自定义修改被清除
- 显示成功提示："重置成功！"
- 退出编辑状态（如果有）

#### P1 TC-096: 重置配置 - 取消重置
**测试步骤：**
1. 点击重置按钮
2. 在确认对话框中点击取消

**预期结果：**
- 配置保持不变
- 当前修改保留
- 不执行重置操作

#### P1 TC-097: 重置配置 - 编辑状态下重置
**测试步骤：**
1. 进入编辑模式
2. 点击重置按钮
3. 确认重置

**预期结果：**
- 配置重置成功
- 编辑状态被清除
- 错误信息被清除

#### P2 TC-098: 重置配置 - 重置后数据持久化
**测试步骤：**
1. 重置配置
2. 关闭配置管理器
3. 重新打开配置管理器

**预期结果：**
- 配置仍为默认值
- 数据已保存到localStorage
- 刷新页面后仍为默认值

### 2.8 数据持久化

#### P0 TC-099: 数据持久化 - 配置保存
**测试步骤：**
1. 修改配置（添加分类、修改概率等）
2. 关闭配置管理器
3. 重新打开配置管理器

**预期结果：**
- 修改的配置已保存
- 显示与关闭前一致

#### P0 TC-100: 数据持久化 - 刷新页面
**测试步骤：**
1. 修改配置
2. 刷新页面
3. 打开配置管理器

**预期结果：**
- 配置已保存
- 显示与刷新前一致

#### P1 TC-101: 数据持久化 - localStorage存储键
**测试步骤：**
1. 打开浏览器开发者工具
2. 查看localStorage

**预期结果：**
- 找到活动配置的存储键
- 数据格式为JSON
- 数据结构正确

#### P2 TC-102: 数据持久化 - 存储失败处理
**测试步骤：**
1. 模拟localStorage存储失败（如果可能）
2. 尝试保存配置

**预期结果：**
- 显示错误提示或静默失败
- 不影响其他功能

### 2.9 界面交互和用户体验

#### P1 TC-103: 界面交互 - 统计信息显示
**测试步骤：**
1. 打开配置管理器
2. 观察左侧统计信息

**预期结果：**
- 显示："X个分类，共X个活动"
- 统计信息实时更新
- 格式正确

#### P1 TC-104: 界面交互 - 空状态提示
**测试步骤：**
1. 没有选择分类（如果可能）
2. 观察右侧显示

**预期结果：**
- 显示："请先在左侧选择或创建一个分类"
- 提示清晰明确

#### P1 TC-105: 界面交互 - 编辑模式焦点
**测试步骤：**
1. 进入编辑模式
2. 观察输入框

**预期结果：**
- 输入框自动获得焦点（autoFocus）
- 可以直接输入
- 光标在输入框内

#### P1 TC-106: 界面交互 - 按钮提示信息
**测试步骤：**
1. 鼠标悬停在各个按钮上
2. 观察提示信息

**预期结果：**
- 显示title属性提示
- 提示信息清晰明确
- 包括：新增分类、新增活动、编辑、删除、重置、自动平衡等

#### P2 TC-107: 界面交互 - 响应式布局
**测试步骤：**
1. 在不同屏幕尺寸下打开配置管理器
2. 观察布局

**预期结果：**
- 布局自适应
- 内容正常显示
- 不出现横向滚动条（如果可能）

#### P2 TC-108: 界面交互 - 键盘导航
**测试步骤：**
1. 使用Tab键导航
2. 观察焦点移动

**预期结果：**
- 焦点按逻辑顺序移动
- 可以访问所有可交互元素
- 键盘操作流畅

### 2.10 边界条件和异常情况

#### P2 TC-109: 边界条件 - 配置数据损坏
**测试步骤：**
1. 手动修改localStorage中的数据为无效JSON
2. 打开配置管理器

**预期结果：**
- 自动恢复为默认配置
- 或显示错误提示
- 不影响其他功能

#### P2 TC-110: 边界条件 - 配置数据为空
**测试步骤：**
1. 清空localStorage中的配置数据
2. 打开配置管理器

**预期结果：**
- 自动加载默认配置
- 显示默认分类和活动项
- 功能正常

#### P2 TC-111: 边界条件 - 快速连续操作
**测试步骤：**
1. 快速连续点击添加、删除、编辑按钮

**预期结果：**
- 操作正常执行
- 不出现重复操作
- 状态更新正确

#### P2 TC-112: 边界条件 - 大量数据
**测试步骤：**
1. 创建20个分类
2. 每个分类创建20个活动项
3. 观察性能

**预期结果：**
- 界面响应正常
- 操作流畅
- 无明显卡顿

#### P2 TC-113: 边界条件 - 特殊字符输入
**测试步骤：**
1. 编辑分类或活动项名称
2. 输入特殊字符（如emoji、符号等）

**预期结果：**
- 根据实现，可能允许或限制
- 如果允许，保存成功
- 如果限制，显示相应提示

#### P2 TC-114: 异常情况 - 编辑状态冲突
**测试步骤：**
1. 编辑分类A
2. 不保存，直接编辑分类B

**预期结果：**
- 分类A的编辑状态被取消
- 进入分类B的编辑状态
- 分类A的修改丢失

#### P2 TC-115: 异常情况 - 删除正在编辑的分类
**测试步骤：**
1. 进入编辑模式
2. 删除正在编辑的分类

**预期结果：**
- 分类被删除
- 编辑状态被清除
- 自动选中其他分类

---

## 测试总结

### 活动配置管理测试覆盖范围（92个用例）

#### 功能模块覆盖：
- ✅ **配置管理器打开和关闭**（5个用例）
- ✅ **一级分类管理**（24个用例）
  - 添加分类（4个用例）
  - 编辑分类（11个用例）
  - 删除分类（6个用例）
  - 选择分类（4个用例）
- ✅ **二级活动项管理**（26个用例）
  - 添加活动项（5个用例）
  - 编辑活动项（14个用例）
  - 删除活动项（5个用例）
- ✅ **概率自动平衡**（12个用例）
  - 全局自动平衡（6个用例）
  - 分类内自动平衡（6个用例）
- ✅ **概率验证和显示**（5个用例）
- ✅ **重置配置功能**（4个用例）
- ✅ **数据持久化**（4个用例）
- ✅ **界面交互和用户体验**（6个用例）
- ✅ **边界条件和异常情况**（7个用例）

### 重点测试项

1. **概率计算逻辑**：
   - 自定义分类概率自动计算
   - 概率不匹配警告
   - 自动平衡算法

2. **数据验证**：
   - 名称唯一性验证
   - 名称长度限制
   - 数量上限限制

3. **编辑功能**：
   - 编辑状态管理
   - 快捷键支持
   - 取消和保存逻辑

4. **边界情况**：
   - 数量上限
   - 空状态处理
   - 数据损坏恢复

5. **用户体验**：
   - 操作反馈
   - 错误提示
   - 界面交互

### 测试完成度

✅ **活动配置管理测试用例编写完成（92个用例）**

所有功能点、边界条件、异常情况和用户体验均已全面覆盖。测试用例可用于全面测试活动配置管理模块的各项功能。

