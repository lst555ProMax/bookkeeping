# 悬浮球模块测试用例

## 一、悬浮球基本功能

### 1.1 悬浮球显示和位置

#### TC-001: 悬浮球显示 - 基本功能
**测试步骤：**
1. 打开应用
2. 查看页面右下角

**预期结果：**
- 悬浮球正确显示
- 默认位置在右下角（距离底部40px，距离右侧40px）
- 悬浮球样式美观（蓝色渐变背景）

#### TC-002: 悬浮球显示 - 图标显示
**测试步骤：**
1. 查看悬浮球图标

**预期结果：**
- 速记模式显示💭图标
- 待办模式显示📝图标
- 图标清晰可见

#### TC-003: 悬浮球显示 - 模式样式
**测试步骤：**
1. 查看不同模式下的悬浮球样式

**预期结果：**
- 速记模式：蓝色渐变背景
- 待办模式：粉色渐变背景
- 样式区分明显

#### TC-004: 悬浮球显示 - 呼吸动画
**测试步骤：**
1. 观察悬浮球动画效果

**预期结果：**
- 有呼吸动画效果（阴影变化）
- 动画流畅
- 3秒循环

#### TC-005: 悬浮球显示 - 悬停效果
**测试步骤：**
1. 鼠标悬停在悬浮球上

**预期结果：**
- 悬浮球放大（scale 1.1）
- 阴影增强
- 过渡动画流畅

#### TC-006: 悬浮球显示 - 点击效果
**测试步骤：**
1. 点击悬浮球

**预期结果：**
- 点击时缩小（scale 0.95）
- 有视觉反馈

### 1.2 悬浮球点击功能

#### TC-007: 点击悬浮球 - 打开悬浮窗
**测试步骤：**
1. 悬浮窗关闭状态
2. 点击悬浮球（不拖动）

**预期结果：**
- 悬浮窗打开
- 显示输入框
- 光标自动定位到文本末尾

#### TC-008: 点击悬浮球 - 关闭悬浮窗
**测试步骤：**
1. 悬浮窗打开状态
2. 点击悬浮球（不拖动）

**预期结果：**
- 悬浮窗关闭
- 内容保持（自动保存）

#### TC-009: 点击悬浮球 - 区分点击和拖动
**测试步骤：**
1. 按下鼠标
2. 移动距离小于5px
3. 释放鼠标

**预期结果：**
- 视为点击操作
- 切换悬浮窗开关状态
- 不视为拖动

#### TC-010: 点击悬浮球 - 拖动后不触发点击
**测试步骤：**
1. 按下鼠标
2. 拖动超过5px
3. 释放鼠标

**预期结果：**
- 视为拖动操作
- 不触发点击事件
- 悬浮窗状态不变

## 二、悬浮球拖动功能

### 2.1 拖动基本功能

#### TC-011: 拖动悬浮球 - 基本功能
**测试步骤：**
1. 按下鼠标左键
2. 拖动鼠标
3. 释放鼠标

**预期结果：**
- 悬浮球跟随鼠标移动
- 拖动过程中显示dragging样式
- 释放后位置保存

#### TC-012: 拖动悬浮球 - 拖动样式
**测试步骤：**
1. 拖动悬浮球

**预期结果：**
- 拖动时显示grabbing光标
- 悬浮球放大（scale 1.1）
- 拖动状态明显

#### TC-013: 拖动悬浮球 - 边界限制
**测试步骤：**
1. 拖动悬浮球到屏幕边缘

**预期结果：**
- 悬浮球不能超出屏幕边界
- 在边界处停止
- 位置限制正确

#### TC-014: 拖动悬浮球 - 拖动到左上角
**测试步骤：**
1. 拖动悬浮球到左上角

**预期结果：**
- 悬浮球可以移动到左上角
- 位置正确
- 不超出边界

#### TC-015: 拖动悬浮球 - 拖动到右下角
**测试步骤：**
1. 拖动悬浮球到右下角

**预期结果：**
- 悬浮球可以移动到右下角
- 位置正确
- 不超出边界

#### TC-016: 拖动悬浮球 - 拖动距离阈值
**测试步骤：**
1. 按下鼠标
2. 移动距离刚好5px
3. 释放鼠标

**预期结果：**
- 超过5px视为拖动
- 不触发点击事件

#### TC-017: 拖动悬浮球 - 拖动距离小于阈值
**测试步骤：**
1. 按下鼠标
2. 移动距离小于5px
3. 释放鼠标

**预期结果：**
- 视为点击操作
- 触发点击事件

#### TC-018: 拖动悬浮球 - 右键拖动
**测试步骤：**
1. 使用右键拖动悬浮球

**预期结果：**
- 不触发拖动
- 触发右键菜单（切换模式）

### 2.2 拖动位置保存

#### TC-019: 拖动位置保存 - 基本功能
**测试步骤：**
1. 拖动悬浮球到新位置
2. 刷新页面

**预期结果：**
- 悬浮球位置保持
- 位置正确恢复

#### TC-020: 拖动位置保存 - 关闭浏览器
**测试步骤：**
1. 拖动悬浮球到新位置
2. 关闭浏览器
3. 重新打开

**预期结果：**
- 悬浮球位置保持
- 位置正确恢复

## 三、模式切换功能

### 3.1 右键切换模式

#### TC-021: 切换模式 - 基本功能
**测试步骤：**
1. 当前为速记模式
2. 右键点击悬浮球

**预期结果：**
- 切换到待办模式
- 图标变为📝
- 背景色变为粉色

#### TC-022: 切换模式 - 从待办切换到速记
**测试步骤：**
1. 当前为待办模式
2. 右键点击悬浮球

**预期结果：**
- 切换到速记模式
- 图标变为💭
- 背景色变为蓝色

#### TC-023: 切换模式 - 切换时悬浮窗状态
**测试步骤：**
1. 悬浮窗打开
2. 右键切换模式

**预期结果：**
- 模式切换成功
- 悬浮窗保持打开状态
- 显示对应模式的内容

#### TC-024: 切换模式 - 切换时内容保持
**测试步骤：**
1. 速记模式输入内容
2. 切换到待办模式
3. 再切换回速记模式

**预期结果：**
- 速记内容保持
- 待办内容保持
- 内容正确切换显示

#### TC-025: 切换模式 - 模式保存
**测试步骤：**
1. 切换到待办模式
2. 刷新页面

**预期结果：**
- 模式保持为待办模式
- 图标和样式正确

## 四、悬浮窗功能

### 4.1 悬浮窗打开和关闭

#### TC-026: 打开悬浮窗 - 基本功能
**测试步骤：**
1. 点击悬浮球打开悬浮窗

**预期结果：**
- 悬浮窗打开
- 显示输入框
- 光标自动定位到文本末尾
- 自动获得焦点

#### TC-027: 关闭悬浮窗 - 点击关闭按钮
**测试步骤：**
1. 悬浮窗打开
2. 点击关闭按钮（✕）

**预期结果：**
- 悬浮窗关闭
- 内容保持（自动保存）

#### TC-028: 关闭悬浮窗 - 按ESC键
**测试步骤：**
1. 悬浮窗打开
2. 在输入框中按ESC键

**预期结果：**
- 悬浮窗关闭
- 内容保持

#### TC-029: 关闭悬浮窗 - 点击悬浮球
**测试步骤：**
1. 悬浮窗打开
2. 点击悬浮球

**预期结果：**
- 悬浮窗关闭
- 内容保持

#### TC-030: 悬浮窗 - 位置恢复
**测试步骤：**
1. 拖动悬浮窗到新位置
2. 关闭悬浮窗
3. 重新打开

**预期结果：**
- 悬浮窗在之前的位置打开
- 位置正确恢复

### 4.2 悬浮窗拖动功能

#### TC-031: 拖动悬浮窗 - 基本功能
**测试步骤：**
1. 打开悬浮窗
2. 拖动窗口标题栏
3. 移动鼠标

**预期结果：**
- 悬浮窗跟随鼠标移动
- 拖动流畅
- 位置实时更新

#### TC-032: 拖动悬浮窗 - 拖动样式
**测试步骤：**
1. 拖动悬浮窗

**预期结果：**
- 拖动时显示dragging样式
- 视觉反馈明显

#### TC-033: 拖动悬浮窗 - 边界限制
**测试步骤：**
1. 拖动悬浮窗到屏幕边缘

**预期结果：**
- 悬浮窗不能超出屏幕边界
- 在边界处停止
- 位置限制正确

#### TC-034: 拖动悬浮窗 - 位置保存
**测试步骤：**
1. 拖动悬浮窗到新位置
2. 关闭并重新打开

**预期结果：**
- 悬浮窗在新位置打开
- 位置正确保存

#### TC-035: 拖动悬浮窗 - 右键拖动
**测试步骤：**
1. 使用右键拖动悬浮窗

**预期结果：**
- 不触发拖动
- 或正常拖动（取决于实现）

## 五、速记模式功能

### 5.1 速记输入功能

#### TC-036: 速记输入 - 基本功能
**测试步骤：**
1. 打开悬浮窗（速记模式）
2. 输入内容："今天天气不错"
3. 按 Ctrl+Enter 保存

**预期结果：**
- 速记添加到列表
- 显示成功提示："速记添加成功！"
- 输入框清空
- 悬浮窗保持打开

#### TC-037: 速记输入 - 空内容保存
**测试步骤：**
1. 输入框为空
2. 按 Ctrl+Enter 保存

**预期结果：**
- 显示错误提示："速记内容不能为空！"
- 不添加到列表
- 输入框保持为空

#### TC-038: 速记输入 - 仅空格内容
**测试步骤：**
1. 输入仅包含空格的内容
2. 按 Ctrl+Enter 保存

**预期结果：**
- 显示错误提示："速记内容不能为空！"
- 空格被trim处理

#### TC-039: 速记输入 - 最大长度
**测试步骤：**
1. 输入100个字符
2. 查看字符计数

**预期结果：**
- 显示 "100/100"
- 可以正常输入

#### TC-040: 速记输入 - 超过最大长度
**测试步骤：**
1. 尝试输入超过100个字符

**预期结果：**
- 输入框限制输入
- 无法输入超过100字符
- maxLength属性生效

#### TC-041: 速记输入 - 保存超过100字符
**测试步骤：**
1. 通过其他方式输入超过100字符（如粘贴）
2. 尝试保存

**预期结果：**
- 显示错误提示："速记内容不能超过 100 个字符！"
- 不保存

#### TC-042: 速记输入 - 字符计数显示
**测试步骤：**
1. 输入50个字符
2. 查看字符计数

**预期结果：**
- 显示 "50/100"
- 剩余字符数正确

#### TC-043: 速记输入 - 字符计数警告
**测试步骤：**
1. 输入超过80个字符

**预期结果：**
- 字符计数显示警告样式（如红色）
- 剩余字符数小于20时显示警告

#### TC-044: 速记输入 - 自动保存临时内容
**测试步骤：**
1. 输入内容
2. 关闭悬浮窗
3. 重新打开

**预期结果：**
- 内容自动保存
- 重新打开后内容恢复
- 内容保存到localStorage

#### TC-045: 速记输入 - 保存后清空临时内容
**测试步骤：**
1. 输入内容
2. 按 Ctrl+Enter 保存
3. 关闭并重新打开悬浮窗

**预期结果：**
- 保存后临时内容清空
- 重新打开后输入框为空

#### TC-046: 速记输入 - 光标自动定位
**测试步骤：**
1. 打开悬浮窗
2. 已有内容
3. 查看光标位置

**预期结果：**
- 光标自动定位到文本末尾
- 可以继续输入

#### TC-047: 速记输入 - 切换模式时光标定位
**测试步骤：**
1. 速记模式有内容
2. 切换到待办模式
3. 再切换回速记模式

**预期结果：**
- 光标自动定位到文本末尾
- 可以继续编辑

### 5.2 速记键盘快捷键

#### TC-048: 键盘快捷键 - Ctrl+Enter保存
**测试步骤：**
1. 输入内容
2. 按 Ctrl+Enter

**预期结果：**
- 速记保存成功
- 等同于点击保存按钮

#### TC-049: 键盘快捷键 - ESC关闭
**测试步骤：**
1. 在输入框中按ESC键

**预期结果：**
- 悬浮窗关闭
- 内容保持

#### TC-050: 键盘快捷键 - 普通Enter键
**测试步骤：**
1. 输入内容
2. 按Enter键（不按Ctrl）

**预期结果：**
- 换行
- 不保存
- 正常输入

## 六、待办模式功能

### 6.1 待办输入功能

#### TC-051: 待办输入 - 基本功能
**测试步骤：**
1. 切换到待办模式
2. 打开悬浮窗
3. 输入待办内容

**预期结果：**
- 输入框正常显示
- 可以输入内容
- 无字符限制

#### TC-052: 待办输入 - 无字符限制
**测试步骤：**
1. 待办模式
2. 输入大量内容（超过100字符）

**预期结果：**
- 可以正常输入
- 无字符限制提示
- 内容可以保存

#### TC-053: 待办输入 - 自动保存
**测试步骤：**
1. 待办模式输入内容
2. 关闭悬浮窗
3. 重新打开

**预期结果：**
- 内容自动保存
- 重新打开后内容恢复

#### TC-054: 待办输入 - 自动保存提示
**测试步骤：**
1. 待办模式
2. 查看底部提示

**预期结果：**
- 显示"✓ 自动保存"提示
- 提示清晰可见

#### TC-055: 待办输入 - 光标自动定位
**测试步骤：**
1. 待办模式打开悬浮窗
2. 已有内容
3. 查看光标位置

**预期结果：**
- 光标自动定位到文本末尾
- 可以继续输入

### 6.2 待办键盘快捷键

#### TC-056: 待办模式 - ESC关闭
**测试步骤：**
1. 待办模式
2. 在输入框中按ESC键

**预期结果：**
- 悬浮窗关闭
- 内容保持

#### TC-057: 待办模式 - Ctrl+Enter无效
**测试步骤：**
1. 待办模式
2. 输入内容
3. 按 Ctrl+Enter

**预期结果：**
- 不执行保存操作
- 可能换行或无效
- 待办模式不支持Ctrl+Enter保存

## 七、数据持久化测试

#### TC-058: 数据持久化 - 悬浮球位置
**测试步骤：**
1. 拖动悬浮球到新位置
2. 刷新页面

**预期结果：**
- 悬浮球位置保持
- 位置正确恢复

#### TC-059: 数据持久化 - 悬浮窗位置
**测试步骤：**
1. 拖动悬浮窗到新位置
2. 关闭并重新打开

**预期结果：**
- 悬浮窗位置保持
- 位置正确恢复

#### TC-060: 数据持久化 - 悬浮窗开关状态
**测试步骤：**
1. 打开悬浮窗
2. 刷新页面

**预期结果：**
- 悬浮窗保持打开状态
- 状态正确恢复

#### TC-061: 数据持久化 - 模式状态
**测试步骤：**
1. 切换到待办模式
2. 刷新页面

**预期结果：**
- 模式保持为待办模式
- 图标和样式正确

#### TC-062: 数据持久化 - 速记临时内容
**测试步骤：**
1. 速记模式输入内容
2. 关闭悬浮窗
3. 刷新页面

**预期结果：**
- 临时内容保持
- 重新打开后内容恢复

#### TC-063: 数据持久化 - 待办内容
**测试步骤：**
1. 待办模式输入内容
2. 关闭悬浮窗
3. 刷新页面

**预期结果：**
- 待办内容保持
- 重新打开后内容恢复

#### TC-064: 数据持久化 - 关闭浏览器
**测试步骤：**
1. 修改所有状态（位置、模式、内容）
2. 关闭浏览器
3. 重新打开

**预期结果：**
- 所有状态保持
- 位置、模式、内容都正确恢复

## 八、边界条件和异常情况

#### TC-065: 边界条件 - 拖动到屏幕边缘
**测试步骤：**
1. 拖动悬浮球到屏幕最边缘

**预期结果：**
- 悬浮球不超出屏幕
- 位置限制正确

#### TC-066: 边界条件 - 拖动悬浮窗到屏幕边缘
**测试步骤：**
1. 拖动悬浮窗到屏幕最边缘

**预期结果：**
- 悬浮窗不超出屏幕
- 位置限制正确

#### TC-067: 边界条件 - 窗口大小变化
**测试步骤：**
1. 拖动悬浮球到特定位置
2. 改变浏览器窗口大小

**预期结果：**
- 悬浮球位置调整
- 不超出新的窗口边界
- 或位置保持不变（取决于实现）

#### TC-068: 边界条件 - 快速连续操作
**测试步骤：**
1. 快速连续点击悬浮球

**预期结果：**
- 每次点击都正确响应
- 悬浮窗状态正确切换

#### TC-069: 边界条件 - 拖动和点击混合操作
**测试步骤：**
1. 按下鼠标
2. 轻微移动（小于5px）
3. 释放鼠标

**预期结果：**
- 视为点击操作
- 不视为拖动

#### TC-070: 边界条件 - 速记内容特殊字符
**测试步骤：**
1. 输入包含特殊字符的内容
2. 保存

**预期结果：**
- 特殊字符正确保存
- 显示正确

#### TC-071: 边界条件 - 待办内容超长文本
**测试步骤：**
1. 待办模式输入超长文本（1000+字符）

**预期结果：**
- 可以正常输入
- 内容正确保存
- 显示正常

#### TC-072: 异常情况 - localStorage存储失败
**测试步骤：**
1. 模拟localStorage存储失败
2. 尝试保存状态

**预期结果：**
- 静默失败（不影响使用）
- 或显示错误提示

#### TC-073: 异常情况 - 位置数据损坏
**测试步骤：**
1. 模拟localStorage中位置数据损坏
2. 刷新页面

**预期结果：**
- 使用默认位置
- 不报错
- 功能正常

## 九、UI/UX测试

#### TC-074: UI/UX - 悬浮球样式
**测试步骤：**
1. 查看悬浮球样式

**预期结果：**
- 样式美观
- 渐变背景
- 阴影效果
- 圆形按钮

#### TC-075: UI/UX - 悬浮窗样式
**测试步骤：**
1. 查看悬浮窗样式

**预期结果：**
- 样式美观
- 圆角边框
- 阴影效果
- 布局合理

#### TC-076: UI/UX - 拖动动画
**测试步骤：**
1. 拖动悬浮球或悬浮窗

**预期结果：**
- 拖动流畅
- 无卡顿
- 跟随鼠标移动

#### TC-077: UI/UX - 打开动画
**测试步骤：**
1. 打开悬浮窗

**预期结果：**
- 有打开动画（slideIn）
- 动画流畅
- 视觉效果良好

#### TC-078: UI/UX - 呼吸动画
**测试步骤：**
1. 观察悬浮球呼吸动画

**预期结果：**
- 动画流畅
- 阴影变化自然
- 3秒循环

#### TC-079: UI/UX - 悬停效果
**测试步骤：**
1. 鼠标悬停在悬浮球上

**预期结果：**
- 放大效果流畅
- 阴影增强
- 过渡自然

#### TC-080: UI/UX - 响应式布局
**测试步骤：**
1. 在不同屏幕尺寸下查看

**预期结果：**
- 悬浮球和悬浮窗正常显示
- 位置限制正确
- 无布局问题

#### TC-081: UI/UX - 层级显示
**测试步骤：**
1. 打开悬浮窗
2. 查看层级关系

**预期结果：**
- 悬浮球层级高于悬浮窗
- 悬浮窗不被遮挡
- z-index设置正确

#### TC-082: UI/UX - 输入框焦点
**测试步骤：**
1. 打开悬浮窗

**预期结果：**
- 输入框自动获得焦点
- 光标定位到文本末尾
- 可以立即输入

#### TC-083: UI/UX - 提示文字
**测试步骤：**
1. 查看输入框placeholder

**预期结果：**
- 速记模式：显示"记录你的灵感（自动保存）\n按 Ctrl+Enter 保存到速记列表"
- 待办模式：显示"记录你的待办事项（自动保存）"
- 提示清晰

#### TC-084: UI/UX - 保存提示
**测试步骤：**
1. 速记模式查看底部提示

**预期结果：**
- 显示字符计数
- 显示"Ctrl+Enter 保存"提示
- 提示清晰

## 十、交互细节测试

#### TC-085: 交互细节 - 拖动时禁止文本选择
**测试步骤：**
1. 拖动悬浮球或悬浮窗

**预期结果：**
- 拖动时不能选择文本
- user-select: none生效

#### TC-086: 交互细节 - 拖动时阻止默认行为
**测试步骤：**
1. 拖动悬浮球

**预期结果：**
- 不触发页面滚动
- 不触发其他默认行为
- 拖动流畅

#### TC-087: 交互细节 - 点击外部区域
**测试步骤：**
1. 打开悬浮窗
2. 点击悬浮窗外部区域

**预期结果：**
- 悬浮窗不关闭（悬浮窗没有点击外部关闭功能）
- 或根据实现决定是否关闭

#### TC-088: 交互细节 - 多个悬浮窗
**测试步骤：**
1. 检查是否有多个悬浮窗同时显示

**预期结果：**
- 只有一个悬浮窗
- 不会重复创建

#### TC-089: 交互细节 - 窗口大小变化时位置调整
**测试步骤：**
1. 悬浮窗在特定位置
2. 缩小浏览器窗口
3. 查看悬浮窗位置

**预期结果：**
- 悬浮窗位置调整
- 不超出新的窗口边界
- 或保持原位置（取决于实现）

#### TC-090: 交互细节 - 滚动页面时位置
**测试步骤：**
1. 悬浮球在特定位置
2. 滚动页面

**预期结果：**
- 悬浮球位置相对于视窗保持不变
- 使用fixed定位
- 不随页面滚动

---

## 测试总结

### 测试覆盖范围（全部90个用例）
- ✅ 悬浮球基本功能（6个用例）
- ✅ 悬浮球点击功能（4个用例）
- ✅ 悬浮球拖动功能（8个用例）
- ✅ 模式切换功能（5个用例）
- ✅ 悬浮窗功能（10个用例）
- ✅ 速记模式功能（15个用例）
- ✅ 待办模式功能（7个用例）
- ✅ 数据持久化测试（7个用例）
- ✅ 边界条件和异常情况（9个用例）
- ✅ UI/UX测试（11个用例）
- ✅ 交互细节测试（6个用例）

**总计：90个测试用例**

### 重点测试项
1. **悬浮球拖动**：拖动功能、边界限制、位置保存、点击和拖动区分
2. **模式切换**：右键切换、模式保存、内容保持
3. **悬浮窗功能**：打开关闭、拖动、位置保存
4. **速记模式**：输入限制、自动保存、键盘快捷键、保存到列表
5. **待办模式**：无限制输入、自动保存、内容保持
6. **数据持久化**：位置、状态、内容、模式都正确保存和恢复
7. **UI/UX**：动画效果、样式美观、交互流畅

### 测试完成度
✅ **悬浮球模块测试用例编写完成（90个用例）**

所有功能点、拖动逻辑、模式切换、数据持久化、边界条件、异常情况和UI/UX均已覆盖。测试用例可用于全面测试悬浮球模块的各项功能。

