# 睡眠记录模块测试用例

## 测试概述
本文档包含睡眠记录模块的测试用例，涵盖所有功能点和边界条件测试。

---

## 一、记录添加功能测试

### 1.1 基本添加功能

#### P0 TC-001: 正常添加睡眠记录  ✅
**前置条件：** 已进入睡眠记录页面  
**测试步骤：**

1. 选择日期：2025-01-15
2. 设置入睡时间：23:00
3. 设置醒来时间：07:00
4. 输入睡眠质量：85
5. 点击"添加记录"

**预期结果：**
- 提示"添加成功"
- 记录出现在列表中
- 睡眠时长自动计算为8小时
- 表单重置为默认值

#### P1 TC-002: 添加包含小睡的记录  ✅
**测试步骤：**
1. 填写基本睡眠信息
2. 勾选"中午"小睡
3. 勾选"下午"小睡
4. 提交

**预期结果：**
- 添加成功
- 记录中显示小睡信息：中午、下午

#### P1 TC-003: 添加包含备注的记录  ✅
**测试步骤：**
1. 填写基本睡眠信息
2. 输入备注：昨晚睡得不错
3. 提交

**预期结果：**
- 添加成功
- 备注正常保存和显示  备注限制字数  50字

#### P2 TC-004: 添加无小睡无备注的记录  ✅
**测试步骤：**
1. 只填写必填字段（日期、入睡时间、醒来时间、质量）
2. 不勾选任何小睡
3. 不填写备注
4. 提交

**预期结果：**
- 添加成功
- 小睡和备注字段为空或undefined

### 1.2 时间边界值测试

#### P1 TC-005: 跨天睡眠 - 正常情况  ✅
**测试步骤：**
1. 入睡时间：23:30
2. 醒来时间：07:30
3. 填写其他必填项
4. 提交

**预期结果：**
- 添加成功
- 睡眠时长计算正确：8小时

#### P2 TC-006: 跨天睡眠 - 凌晨入睡  ✅
**测试步骤：**
1. 入睡时间：01:00
2. 醒来时间：09:00
3. 填写其他必填项
4. 提交

**预期结果：**
- 添加成功
- 睡眠时长计算正确：8小时

#### P2 TC-007: 跨天睡眠 - 边界情况（23:59入睡）✅
**测试步骤：**
1. 入睡时间：23:59
2. 醒来时间：08:00
3. 填写其他必填项
4. 提交

**预期结果：**
- 添加成功
- 睡眠时长计算正确：8小时1分钟

#### P2 TC-008: 跨天睡眠 - 边界情况（00:00醒来）  ✅
**测试步骤：**
1. 入睡时间：23:00
2. 醒来时间：00:00
3. 填写其他必填项
4. 提交

**预期结果：**
- 添加成功
- 睡眠时长计算正确：1小时

#### P2 TC-009: 同一天睡眠（不跨天）  ✅
**测试步骤：**
1. 入睡时间：14:00
2. 醒来时间：16:00
3. 填写其他必填项
4. 提交

**预期结果：**
- 添加成功
- 睡眠时长计算正确：2小时

#### P2 TC-010: 极短睡眠时长  ✅
**测试步骤：**
1. 入睡时间：23:00
2. 醒来时间：23:30
3. 填写其他必填项
4. 提交

**预期结果：**
- 添加成功
- 睡眠时长计算正确：30分钟

#### P2 TC-011: 极长睡眠时长  ✅
**测试步骤：**
1. 入睡时间：22:00
2. 醒来时间：12:00（次日）
3. 填写其他必填项
4. 提交

**预期结果：**

- 添加成功
- 睡眠时长计算正确：14小时

### 1.3 睡眠质量边界值测试

#### P2 TC-012: 质量分数最小值  ✅
**测试步骤：**
1. 输入睡眠质量：0
2. 填写其他必填项
3. 提交

**预期结果：**
- 添加成功
- 质量等级显示为"较差"

#### P2 TC-013: 质量分数最大值  ✅
**测试步骤：**
1. 输入睡眠质量：100
2. 填写其他必填项
3. 提交

**预期结果：**
- 添加成功
- 质量等级显示为"优秀"

#### P2 TC-014: 质量分数边界值 - 59分  ✅
**测试步骤：**
1. 输入睡眠质量：59
2. 填写其他必填项
3. 提交

**预期结果：**
- 添加成功
- 质量等级显示为"较差"

#### P2 TC-015: 质量分数边界值 - 60分  ✅
**测试步骤：**
1. 输入睡眠质量：60
2. 填写其他必填项
3. 提交

**预期结果：**
- 添加成功
- 质量等级显示为"一般"

#### P2 TC-016: 质量分数边界值 - 74分   ✅
**测试步骤：**
1. 输入睡眠质量：74
2. 填写其他必填项
3. 提交

**预期结果：**
- 添加成功
- 质量等级显示为"一般"

#### P2 TC-017: 质量分数边界值 - 75分  ✅
**测试步骤：**
1. 输入睡眠质量：75
2. 填写其他必填项
3. 提交

**预期结果：**
- 添加成功
- 质量等级显示为"良好"

#### P2 TC-018: 质量分数边界值 - 89分  ✅
**测试步骤：**
1. 输入睡眠质量：89
2. 填写其他必填项
3. 提交

**预期结果：**
- 添加成功
- 质量等级显示为"良好"

#### P2 TC-019: 质量分数边界值 - 90分  ✅
**测试步骤：**
1. 输入睡眠质量：90
2. 填写其他必填项
3. 提交

**预期结果：**
- 添加成功
- 质量等级显示为"优秀"

#### P1 TC-020: 质量分数无效值 - 负数  ✅
**测试步骤：**
1. 输入睡眠质量：-1
2. 填写其他必填项
3. 提交

**预期结果：**
- 提示"睡眠质量分数必须在0-100之间"
- 添加失败

#### P1 TC-021: 质量分数无效值 - 超过100  ✅
**测试步骤：**
1. 输入睡眠质量：101
2. 填写其他必填项
3. 提交

**预期结果：**
- 提示"睡眠质量分数必须在0-100之间"
- 添加失败

#### P2 TC-022: 质量分数为空  ✅
**测试步骤：**
1. 不输入睡眠质量
2. 填写其他必填项
3. 提交

**预期结果：**
- 提示"睡眠质量分数必须在0-100之间"或"请填写所有必填字段"
- 添加失败

### 1.4 日期边界值测试

#### P2 TC-023: 日期边界值 - 最早日期  ✅
**测试步骤：**
1. 选择日期：2024-10-01（系统限制的最早日期）
2. 填写其他必填项
3. 提交

**预期结果：**
- 添加成功

#### P2 TC-024: 日期边界值 - 早于限制日期  ✅
**测试步骤：**
1. 尝试选择日期：2024-09-30
2. 填写其他必填项
3. 提交

**预期结果：**
- 日期选择器不允许选择该日期
- 或提示"日期必须从2024年10月开始"

#### P1 TC-025: 日期必填验证  ✅
**测试步骤：**
1. 不选择日期
2. 填写其他必填项
3. 提交

**预期结果：**
- 提示"请填写所有必填字段"
- 添加失败

### 1.5 时间必填验证

#### P1 TC-026: 入睡时间必填验证  ✅
**测试步骤：**
1. 不设置入睡时间
2. 填写其他必填项
3. 提交

**预期结果：**
- 提示"请填写所有必填字段"
- 添加失败

#### P1 TC-027: 醒来时间必填验证  ✅
**测试步骤：**
1. 不设置醒来时间
2. 填写其他必填项
3. 提交

**预期结果：**
- 提示"请填写所有必填字段"
- 添加失败

### 1.6 快捷键和交互测试

#### P2 TC-028: 快捷键提交测试  ✅
**测试步骤：**
1. 填写完整的记录信息
2. 按 Ctrl + Enter

**预期结果：**
- 记录成功添加

#### P2 TC-029: 连续添加多条记录  ✅
**测试步骤：**
1. 添加一条记录
2. 不改变日期，修改时间和其他信息
3. 再次添加记录
4. 重复3次

**预期结果：**
- 每次添加成功
- 日期保持不变，方便连续记录

---

## 二、记录编辑功能测试

### 2.1 基本编辑功能

#### P0 TC-030: 正常编辑睡眠记录  ✅
**前置条件：** 已有一条睡眠记录  
**测试步骤：**

1. 点击记录的编辑按钮
2. 修改入睡时间：从23:00改为22:30
3. 修改醒来时间：从07:00改为07:30
4. 修改质量：从85改为90
5. 点击"更新记录"

**预期结果：**
- 提示"更新成功"
- 记录信息已更新
- 睡眠时长重新计算
- 表单恢复为添加模式

#### P1 TC-031: 编辑时修改小睡  ✅
**测试步骤：**
1. 编辑一条记录
2. 取消勾选"中午"小睡
3. 勾选"晚上"小睡
4. 提交

**预期结果：**
- 更新成功
- 小睡信息正确更新

#### P1 TC-032: 编辑时修改备注  ✅
**测试步骤：**
1. 编辑一条有备注的记录
2. 修改备注内容
3. 提交

**预期结果：**
- 更新成功
- 备注内容已更新

#### P2 TC-033: 编辑时清空备注  ✅
**测试步骤：**
1. 编辑一条有备注的记录
2. 删除备注内容
3. 提交

**预期结果：**
- 更新成功
- 备注字段为空或undefined

#### P2 TC-034: 编辑时取消操作  ✅
**测试步骤：**
1. 点击编辑按钮
2. 修改一些字段
3. 点击"取消"按钮

**预期结果：**
- 表单恢复为添加模式
- 记录未被修改

#### P1 TC-035: 编辑时质量验证  ✅
**测试步骤：**

1. 编辑一条记录
2. 将质量改为-1或101
3. 提交

**预期结果：**
- 提示"睡眠质量分数必须在0-100之间"
- 更新失败

---

## 三、记录删除功能测试

### 3.1 删除操作

#### P0 TC-036: 正常删除记录  ✅
**前置条件：** 已有一条记录  
**测试步骤：**
1. 点击记录的删除按钮
2. 在确认对话框中点击"确定"

**预期结果：**
- 提示"删除成功"
- 记录从列表中消失

#### P1 TC-037: 删除时取消操作  ✅
**测试步骤：**
1. 点击记录的删除按钮
2. 在确认对话框中点击"取消"

**预期结果：**
- 记录未被删除
- 仍在列表中显示

#### P2 TC-038: 删除最后一条记录  ✅
**前置条件：** 只有一条记录  
**测试步骤：**
1. 删除该记录

**预期结果：**
- 删除成功
- 显示空状态提示

---

## 四、记录列表展示测试

### 4.1 列表显示

#### P0 TC-039: 空状态显示  ✅
**前置条件：** 没有任何记录  
**测试步骤：**
1. 进入睡眠记录页面

**预期结果：**
- 显示空状态提示："还没有睡眠记录"
- 显示提示文字："开始记录你的睡眠吧~"

#### P0 TC-040: 记录按月份分组显示  ✅
**测试步骤：**
1. 添加不同月份的记录（如：2025-01、2025-02、2025-03）
2. 查看列表

**预期结果：**
- 记录按月份分组显示
- 月份按时间倒序排列（最新的在前）

#### P1 TC-041: 月份统计信息显示  ✅
**测试步骤：**
1. 添加多条同月记录
2. 查看月份头部

**预期结果：**
- 显示该月平均质量分数
- 显示该月平均入睡时间
- 显示该月平均睡眠时长
- 显示记录数（如：5条）

#### P2 TC-042: 月份展开/收起功能  ✅
**测试步骤：**
1. 添加多个月份的记录
2. 点击月份头部

**预期结果：**
- 点击后展开/收起该月份下的所有记录
- 箭头图标相应变化

#### P1 TC-043: 睡眠时长格式化显示
**测试步骤：**
1. 添加睡眠时长为450分钟（7.5小时）的记录  ✅
2. 查看列表

**预期结果：**
- 显示为："7小时30分钟"

#### P2 TC-044: 睡眠时长格式化 - 只有小时  ✅
**测试步骤：**
1. 添加睡眠时长为480分钟（8小时）的记录
2. 查看列表

**预期结果：**
- 显示为："8小时"

#### P2 TC-045: 睡眠时长格式化 - 只有分钟  ✅
**测试步骤：**
1. 添加睡眠时长为30分钟的记录
2. 查看列表

**预期结果：**
- 显示为："30分钟"

#### P1 TC-046: 睡眠质量等级显示  ✅
**测试步骤：**
1. 添加不同质量分数的记录（60、75、90）
2. 查看列表

**预期结果：**
- 60分显示为"一般"（😐）
- 75分显示为"良好"（😊）
- 90分显示为"优秀"（😴）

#### P2 TC-047: 小睡信息显示  ✅
**测试步骤：**
1. 添加包含小睡的记录（勾选上午、中午）
2. 查看列表

**预期结果：**
- 显示小睡标签：上午、中午
- 未勾选的小睡不显示

---

## 五、筛选功能测试

### 5.1 入睡时间筛选

#### P1 TC-048: 入睡时间区间筛选  ✅
**测试步骤：**
1. 设置最小入睡时间：22
2. 设置最大入睡时间：24
3. 查看列表

**预期结果：**
- 只显示入睡时间在22:00-24:00之间的记录

#### P2 TC-049: 入睡时间边界值筛选  ✅
**测试步骤：**
1. 设置最小入睡时间等于某条记录的入睡时间小时数
2. 查看列表

**预期结果：**
- 该记录被包含在结果中

### 5.2 睡眠时长等级筛选

#### P1 TC-050: 睡眠时长等级筛选 - 过少  ✅
**测试步骤：**
1. 选择时长等级：过少（<4小时）
2. 查看列表

**预期结果：**
- 只显示睡眠时长小于4小时的记录

#### P1 TC-051: 睡眠时长等级筛选 - 欠缺  ✅
**测试步骤：**
1. 选择时长等级：欠缺（4-7小时）
2. 查看列表

**预期结果：**
- 只显示睡眠时长在4-7小时之间的记录（不包括7小时）

#### P1 TC-052: 睡眠时长等级筛选 - 正常  ✅
**测试步骤：**
1. 选择时长等级：正常（7-9小时）
2. 查看列表

**预期结果：**
- 只显示睡眠时长在7-9小时之间的记录（包括7和9小时）

#### P1 TC-053: 睡眠时长等级筛选 - 过多  ✅
**测试步骤：**
1. 选择时长等级：过多（>9小时）
2. 查看列表

**预期结果：**
- 只显示睡眠时长大于9小时的记录

#### P2 TC-054: 睡眠时长等级筛选 - 边界值4小时  ✅
**测试步骤：**
1. 添加睡眠时长为240分钟（4小时）的记录
2. 选择"过少"等级
3. 查看列表

**预期结果：**
- 该记录不显示（4小时属于"欠缺"等级）

#### P2 TC-055: 睡眠时长等级筛选 - 边界值7小时  ✅
**测试步骤：**
1. 添加睡眠时长为420分钟（7小时）的记录
2. 选择"正常"等级
3. 查看列表

**预期结果：**
- 该记录显示（7小时属于"正常"等级）

#### P2 TC-056: 睡眠时长等级筛选 - 边界值9小时  ✅
**测试步骤：**
1. 添加睡眠时长为540分钟（9小时）的记录
2. 选择"正常"等级
3. 查看列表

**预期结果：**
- 该记录显示（9小时属于"正常"等级）

#### P2 TC-057: 睡眠时长等级筛选 - 无时长记录 ✅
**测试步骤：**
1. 添加一条duration为undefined的记录
2. 选择任意时长等级（非"全部"）
3. 查看列表

**预期结果：**
- 该记录不显示

### 5.3 睡眠质量等级筛选

#### P1 TC-058: 睡眠质量等级筛选 - 优秀  ✅
**测试步骤：**
1. 选择质量等级：优秀（≥90分）
2. 查看列表

**预期结果：**
- 只显示质量分数≥90的记录

#### P1 TC-059: 睡眠质量等级筛选 - 良好  ✅
**测试步骤：**
1. 选择质量等级：良好（≥75分）
2. 查看列表

**预期结果：**
- 只显示质量分数在75-89之间的记录

#### P1 TC-060: 睡眠质量等级筛选 - 一般  ✅
**测试步骤：**
1. 选择质量等级：一般（≥60分）
2. 查看列表

**预期结果：**
- 只显示质量分数在60-74之间的记录

#### P1 TC-061: 睡眠质量等级筛选 - 较差  ✅
**测试步骤：**
1. 选择质量等级：较差（<60分）
2. 查看列表

**预期结果：**
- 只显示质量分数<60的记录

#### P2 TC-062: 睡眠质量等级筛选 - 边界值90分 ✅
**测试步骤：**
1. 添加质量分数为90的记录
2. 选择"优秀"等级
3. 查看列表

**预期结果：**
- 该记录显示

#### P2 TC-063: 睡眠质量等级筛选 - 边界值75分 ✅
**测试步骤：**
1. 添加质量分数为75的记录
2. 选择"良好"等级
3. 查看列表

**预期结果：**
- 该记录显示

#### P2 TC-064: 睡眠质量等级筛选 - 边界值60分 ✅
**测试步骤：**
1. 添加质量分数为60的记录
2. 选择"一般"等级
3. 查看列表

**预期结果：**
- 该记录显示

#### P2 TC-065: 睡眠质量等级筛选 - 边界值59分 ✅
**测试步骤：**
1. 添加质量分数为59的记录
2. 选择"较差"等级
3. 查看列表

**预期结果：**
- 该记录显示

### 5.4 备注搜索筛选

#### P1 TC-066: 备注关键词搜索  ✅
**测试步骤：**

1. 在备注搜索框输入关键词：不错
2. 查看列表

**预期结果：**
- 只显示备注中包含"不错"的记录

#### P2 TC-067: 备注搜索大小写不敏感  ✅
**测试步骤：**
1. 输入：GOOD（大写）
2. 查看列表

**预期结果：**
- 能匹配到"good"或"Good"的记录

#### P2 TC-068: 备注搜索部分匹配  ✅
**测试步骤：**
1. 输入关键词的一部分
2. 查看列表

**预期结果：**
- 能匹配到包含该部分的记录

#### P2 TC-069: 备注搜索清空  ✅
**测试步骤：**
1. 输入搜索关键词
2. 清空搜索框

**预期结果：**
- 搜索被清除
- 显示所有记录

#### P2 TC-070: 备注搜索无结果  ✅
**测试步骤：**
1. 输入不存在的关键词

**预期结果：**
- 列表为空
- 或显示"无匹配记录"

#### P2 TC-071: 备注搜索前后空格处理  ✅
**测试步骤：**
1. 输入："  不错  "（前后有空格）
2. 查看列表

**预期结果：**
- 系统自动trim处理
- 匹配包含"不错"的记录

### 5.5 组合筛选

#### P1 TC-072: 入睡时间+时长等级组合筛选  ✅
**测试步骤：**
1. 设置入睡时间区间：22-24
2. 选择时长等级：正常
3. 查看列表

**预期结果：**
- 显示同时满足两个条件的记录

#### P2 TC-073: 入睡时间+质量等级组合筛选  ✅
**测试步骤：**
1. 设置入睡时间区间：22-24
2. 选择质量等级：优秀
3. 查看列表

**预期结果：**
- 显示同时满足两个条件的记录

#### P2 TC-074: 时长等级+质量等级组合筛选  ✅
**测试步骤：**
1. 选择时长等级：正常
2. 选择质量等级：优秀
3. 查看列表

**预期结果：**
- 显示同时满足两个条件的记录

#### P1 TC-075: 入睡时间+时长+质量组合筛选  ✅
**测试步骤：**
1. 设置入睡时间区间：22-24
2. 选择时长等级：正常
3. 选择质量等级：优秀
4. 查看列表

**预期结果：**
- 显示同时满足所有条件的记录

#### P2 TC-076: 全条件组合筛选  ✅
**测试步骤：**
1. 设置入睡时间区间
2. 选择时长等级
3. 选择质量等级
4. 输入备注关键词

**预期结果：**
- 显示同时满足所有条件的记录

---

## 六、数据导入导出功能测试

### 6.1 数据导出

#### P0 TC-077: 导出所有睡眠记录  ✅
**测试步骤：**
1. 添加多条睡眠记录
2. 点击导出按钮

**预期结果：**
- 下载JSON文件
- 文件名格式：sleep-records-export-YYYY-MM-DD.json
- 文件包含所有睡眠记录

#### P2 TC-078: 导出空数据  ✅
**测试步骤：**
1. 清空所有记录
2. 点击导出

**预期结果：**
- 导出成功
- 文件包含空的sleepRecords数组

#### P2 TC-079: 导出文件格式验证  ✅
**测试步骤：**

1. 导出数据
2. 打开JSON文件检查格式

**预期结果：**
- 文件是有效的JSON格式
- 包含version、exportDate、sleepRecords、totalRecords等字段

### 6.2 数据导入

#### P0 TC-080: 导入完整数据 ✅
**前置条件：** 准备一个包含睡眠记录的JSON文件  
**测试步骤：**

1. 点击导入按钮
2. 选择JSON文件
3. 确认导入

**预期结果：**
- 提示导入成功
- 显示导入的记录数
- 记录出现在列表中

#### P2 TC-081: 导入重复记录  ✅
**前置条件：** JSON文件中包含已存在的记录（相同ID）  
**测试步骤：**
1. 导入文件

**预期结果：**
- 重复的记录被跳过
- 只导入新记录
- 提示跳过的记录数

#### P3 TC-082: 导入无效格式文件  ✅
**测试步骤：**
1. 选择一个非JSON格式的文件
2. 尝试导入

**预期结果：**
- 提示"请选择JSON格式的文件"
- 导入失败

#### P3 TC-083: 导入文件大小限制  ✅
**测试步骤：**
1. 选择一个超过10MB的文件
2. 尝试导入

**预期结果：**
- 提示"文件大小不能超过10MB"
- 导入失败

#### P3 TC-084: 导入损坏的JSON文件  ✅
**测试步骤：**
1. 选择一个格式错误的JSON文件
2. 尝试导入

**预期结果：**
- 提示"文件格式错误，请确保是有效的JSON文件"
- 导入失败

#### P2 TC-085: 导入缺少必填字段的记录  ✅
**前置条件：** JSON文件中包含缺少id、date、sleepTime、wakeTime或quality的记录  
**测试步骤：**
1. 导入文件

**预期结果：**
- 缺少必填字段的记录被跳过
- 其他有效记录正常导入

#### P1 TC-086: 导入后数据完整性验证  ✅
**测试步骤：**
1. 导出数据
2. 清空所有数据
3. 导入刚才导出的文件

**预期结果：**
- 所有数据恢复
- 记录数量一致
- 时间、质量等信息一致

---

## 七、数据清空功能测试

### 7.1 清空操作

#### P1 TC-087: 清空所有睡眠数据  ✅
**前置条件：** 有多条睡眠记录  
**测试步骤：**
1. 点击清空数据按钮
2. 在确认对话框中确认

**预期结果：**
- 提示确认对话框，显示记录数
- 确认后所有记录被清空

#### P2 TC-088: 清空数据取消操作  ✅
**测试步骤：**
1. 点击清空按钮
2. 在确认对话框中点击"取消"

**预期结果：**
- 数据未被清空
- 记录仍然存在

#### P2 TC-089: 清空空数据  ✅
**测试步骤：**

1. 在没有任何记录时点击清空

**预期结果：**
- 提示已清空0条记录
- 或按钮被禁用

---

## 八、数据看板功能测试

### 8.1 统计卡片

#### P1 TC-090: 月度平均入睡时间统计  ✅
**测试步骤：**
1. 添加多条同月记录
2. 查看看板

**预期结果：**
- 显示该月平均入睡时间

#### P1 TC-091: 月度平均醒来时间统计  ✅
**测试步骤：**
1. 添加多条同月记录
2. 查看看板

**预期结果：**
- 显示该月平均醒来时间

#### P1 TC-092: 月度平均睡眠时长统计  ✅
**测试步骤：**

1. 添加多条同月记录
2. 查看看板

**预期结果：**
- 显示该月平均睡眠时长

#### P1 TC-093: 月度平均质量统计  ✅
**测试步骤：**
1. 添加多条同月记录
2. 查看看板

**预期结果：**
- 显示该月平均质量分数

#### P2 TC-094: 熬穿天数统计  ✅
**测试步骤：**
1. 添加多条记录，其中部分记录入睡时间在6:00-12:00之间
2. 查看看板

**预期结果：**
- 正确统计熬穿天数（入睡时间在6点-12点）

#### P2 TC-095: 失眠天数统计  ✅
**测试步骤：**
1. 添加多条记录，其中部分记录入睡时间在3:00-6:00之间
2. 查看看板

**预期结果：**
- 正确统计失眠天数（入睡时间在3点-6点）

#### P2 TC-096: 入睡规律性统计  ✅
**测试步骤：**
1. 添加多条记录
2. 查看看板

**预期结果：**
- 显示入睡规律性百分比（入睡时间在平均时间±0.5小时区间的记录占比）

#### P2 TC-097: 睡眠时长规律性统计  ✅
**测试步骤：**
1. 添加多条记录
2. 查看看板

**预期结果：**
- 显示睡眠时长规律性百分比（时长在平均时长±0.5小时区间的记录占比）

### 8.2 图表展示

#### P1 TC-098: 睡眠时长趋势图显示  ✅
**测试步骤：**
1. 添加多天记录
2. 查看睡眠时长趋势图

**预期结果：**
- 趋势图正常显示
- 显示每天的睡眠时长
- Y轴显示小时数

#### P2 TC-099: 睡眠时长趋势图空数据
**测试步骤：**
1. 没有任何记录时查看趋势图

**预期结果：**
- 显示空状态或提示无数据

#### P1 TC-100: 睡眠质量趋势图显示  ✅
**测试步骤：**
1. 添加多天记录
2. 查看睡眠质量趋势图

**预期结果：**
- 趋势图正常显示
- 显示每天的质量分数
- 显示平均质量线

#### P2 TC-101: 入睡时间趋势图显示  ✅
**测试步骤：**
1. 添加多天记录
2. 查看入睡时间趋势图

**预期结果：**
- 趋势图正常显示
- 显示每天的入睡时间
- 21:00-23:59的时间正确处理为负值

#### P2 TC-102: 月份切换查看图表  ✅
**测试步骤：**
1. 选择不同月份
2. 查看图表

**预期结果：**
- 图表数据更新为该月份的数据

---

## 九、边界条件和特殊场景测试

### 9.1 时间计算特殊场景

#### P2 TC-103: 21:00-23:59入睡时间特殊处理  ✅
**测试步骤：**
1. 添加入睡时间为21:00的记录
2. 查看数据看板的入睡时间趋势图

**预期结果：**
- 21:00-23:59的时间在图表中正确处理为负值
- 统计计算正确

#### P2 TC-104: 入睡时间边界值 - 21:00  ✅
**测试步骤：**
1. 添加入睡时间为21:00的记录
2. 查看统计和图表

**预期结果：**
- 时间正确转换为负值用于计算
- 显示正常

#### P2 TC-105: 入睡时间边界值 - 23:59  ✅
**测试步骤：**
1. 添加入睡时间为23:59的记录
2. 查看统计和图表

**预期结果：**
- 时间正确转换为负值用于计算
- 显示正常

#### P2 TC-106: 入睡时间边界值 - 20:59  ✅
**测试步骤：**
1. 添加入睡时间为20:59的记录
2. 查看统计和图表

**预期结果：**
- 时间不转换为负值（正常处理）
- 显示正常

#### P2 TC-107: 跨天睡眠 - 醒来时间等于入睡时间
**测试步骤：**
1. 入睡时间：23:00
2. 醒来时间：23:00（次日）
3. 提交

**预期结果：**
- 睡眠时长计算为24小时（1440分钟）

#### P2 TC-108: 跨天睡眠 - 醒来时间早于入睡时间（同一天）✅
**测试步骤：**
1. 入睡时间：14:00
2. 醒来时间：12:00（同一天，不合理）
3. 提交

**预期结果：**
- 系统正确处理或提示时间不合理
- 或按跨天计算（+24小时）

#### P2 TC-109: 睡眠时长为0的情况 ✅
**测试步骤：**
1. 入睡时间：23:00
2. 醒来时间：23:00（次日，但实际应该是23:00）
3. 尝试提交

**预期结果：**
- 系统允许或提示时长过短
- 时长计算为24小时或0小时（根据业务逻辑）

### 9.2 统计功能边界条件

#### P2 TC-110: 空数据统计  ✅
**测试步骤：**
1. 没有任何记录
2. 查看月度统计

**预期结果：**
- 平均入睡时间：00:00
- 平均醒来时间：00:00
- 平均时长：0
- 平均质量：0
- 熬穿天数：0
- 失眠天数：0
- 规律性：0%

#### P2 TC-111: 单条记录统计  ✅
**测试步骤：**
1. 只添加一条记录
2. 查看月度统计

**预期结果：**
- 所有统计值等于该条记录的值
- 规律性为100%（只有一条记录）

#### P2 TC-112: 统计规律性边界 - 100%  ✅
**测试步骤：**
1. 添加多条记录，所有记录的入睡时间都在同一小时内
2. 查看入睡规律性

**预期结果：**
- 规律性接近或等于100%

#### P2 TC-113: 统计规律性边界 - 0%  ✅
**测试步骤：**
1. 添加多条记录，入睡时间差异很大
2. 查看入睡规律性

**预期结果：**
- 规律性接近或等于0%

#### P2 TC-114: 熬穿天数统计 - 边界值6点  ✅
**测试步骤：**
1. 添加入睡时间为06:00的记录
2. 查看统计

**预期结果：**
- 该记录计入熬穿天数

#### P2 TC-115: 熬穿天数统计 - 边界值12点  ✅
**测试步骤：**
1. 添加入睡时间为11:59的记录
2. 查看统计

**预期结果：**
- 该记录计入熬穿天数

#### P2 TC-116: 失眠天数统计 - 边界值3点  ✅
**测试步骤：**
1. 添加入睡时间为03:00的记录
2. 查看统计

**预期结果：**
- 该记录计入失眠天数

#### P2 TC-117: 失眠天数统计 - 边界值6点  ✅
**测试步骤：**
1. 添加入睡时间为05:59的记录
2. 查看统计

**预期结果：**
- 该记录计入失眠天数

#### P2 TC-118: 平均入睡时间计算 - 包含21:00-23:59  ✅
**测试步骤：**
1. 添加多条记录，包括21:00-23:59的入睡时间
2. 查看平均入睡时间

**预期结果：**
- 平均时间计算正确（考虑负值转换）

#### P2 TC-119: 平均睡眠时长 - 包含undefined时长
**测试步骤：**
1. 添加多条记录，部分记录的duration为undefined
2. 查看平均时长

**预期结果：**
- 只计算有duration的记录的平均值
- 或undefined按0处理

### 9.3 数据边界条件

#### P2 TC-120: 大量数据测试
**测试步骤：**
1. 导入或添加1000条记录
2. 测试各项功能

**预期结果：**
- 列表正常显示（可能需要分页或虚拟滚动）
- 筛选功能正常
- 图表正常显示
- 统计计算正确
- 性能可接受

#### P2 TC-121: 单条记录测试
**测试步骤：**
1. 只添加一条记录
2. 测试各项功能

**预期结果：**
- 所有功能正常
- 统计和图表正常显示

#### P2 TC-122: 同一天多条记录
**测试步骤：**
1. 在同一天添加多条记录
2. 查看列表和统计

**预期结果：**
- 记录正常显示
- 统计计算正确（取平均值或最后一条）

#### P2 TC-123: 跨年数据测试
**测试步骤：**
1. 添加2024年和2025年的记录
2. 查看列表和统计

**预期结果：**
- 按年份正确分组
- 统计计算正确

#### P2 TC-124: 跨月数据测试  ✅
**测试步骤：**
1. 添加跨月的记录（如1月31日和2月1日）
2. 查看列表

**预期结果：**
- 按月份正确分组
- 月份切换正常

### 9.4 输入验证边界

#### P2 TC-125: 时间格式异常
**测试步骤：**
1. 尝试输入非法时间格式

**预期结果：**
- 时间选择器限制输入
- 或提示时间格式错误

#### P2 TC-126: 日期格式异常
**测试步骤：**
1. 尝试输入非法日期格式

**预期结果：**
- 日期选择器限制输入
- 或提示日期格式错误

#### P2 TC-127: 质量分数小数
**测试步骤：**
1. 输入质量分数：85.5
2. 提交

**预期结果：**
- 根据系统规则决定是否允许
- 如果允许，正常保存

#### P2 TC-128: 备注超长
**测试步骤：**
1. 输入超长备注（如1000字符）
2. 提交

**预期结果：**
- 根据系统限制处理
- 或提示超出长度限制

### 9.5 存储和持久化

#### P0 TC-129: 刷新页面数据保持
**测试步骤：**
1. 添加几条记录
2. 刷新页面

**预期结果：**
- 数据仍然存在
- 记录正常显示

#### P2 TC-130: 浏览器存储空间不足
**测试步骤：**
1. 模拟localStorage空间不足的情况

**预期结果：**
- 提示存储失败
- 或优雅降级处理

#### P2 TC-131: 多标签页数据同步
**测试步骤：**
1. 打开两个标签页
2. 在一个标签页添加记录
3. 在另一个标签页查看

**预期结果：**
- 可能需要刷新才能看到新数据
- 或实现实时同步

### 9.6 异常处理

#### P2 TC-132: 并发操作测试
**测试步骤：**
1. 快速连续添加多条记录
2. 快速连续删除多条记录

**预期结果：**
- 所有操作都成功
- 数据一致性保持

#### P2 TC-133: 编辑时删除记录  ✅
**测试步骤：**
1. 编辑一条记录
2. 在另一个操作中删除该记录
3. 尝试保存编辑

**预期结果：**
- 提示记录不存在
- 或优雅处理

#### P2 TC-134: 导入时数据冲突
**测试步骤：**
1. 导入包含重复ID的文件
2. 查看结果

**预期结果：**
- 重复记录被跳过
- 新记录正常导入

#### P2 TC-135: 筛选无结果时的显示
**测试步骤：**
1. 设置筛选条件，使结果为空
2. 查看列表

**预期结果：**
- 显示空状态提示
- 或显示"无匹配记录"

---

## 十、UI/UX测试

### 10.1 界面显示

#### P2 TC-136: 响应式布局
**测试步骤：**
1. 在不同屏幕尺寸下查看页面

**预期结果：**
- 布局自适应
- 内容正常显示
- 无横向滚动条

#### P2 TC-137: 表单验证提示
**测试步骤：**

1. 尝试提交无效表单

**预期结果：**
- 显示清晰的错误提示
- 指出具体问题

#### P2 TC-138: 操作反馈
**测试步骤：**
1. 执行各种操作（添加、编辑、删除等）

**预期结果：**
- 每个操作都有明确的成功/失败提示
- 使用toast或消息提示

#### P2 TC-139: 加载状态显示
**测试步骤：**
1. 执行耗时操作（如导入大量数据）

**预期结果：**
- 显示加载状态
- 按钮显示"导入中..."等状态

#### P2 TC-140: 空状态提示
**测试步骤：**
1. 查看空列表
2. 查看空筛选结果

**预期结果：**
- 显示友好的空状态提示
- 有引导性文字

#### P2 TC-141: 月份展开/收起动画
**测试步骤：**
1. 点击月份头部展开/收起

**预期结果：**
- 有平滑的展开/收起动画
- 箭头图标旋转动画

#### P2 TC-142: 图表交互
**测试步骤：**
1. 鼠标悬停在图表数据点上

**预期结果：**
- 显示tooltip
- 显示详细信息

#### P2 TC-143: 快捷键提示
**测试步骤：**

1. 查看表单区域

**预期结果：**
- 如有快捷键，应有提示说明

#### P2 TC-144: 颜色主题一致性
**测试步骤：**
1. 查看不同质量等级的显示

**预期结果：**
- 优秀：绿色系
- 良好：蓝色系
- 一般：黄色系
- 较差：红色系

#### P2 TC-145: 时长颜色显示
**测试步骤：**
1. 查看不同时长等级的显示

**预期结果：**
- 过少：红色
- 欠缺：橙色
- 正常：绿色
- 过多：蓝色

---

## 十一、性能测试

### 11.1 性能指标

#### P2 TC-146: 列表渲染性能
**测试步骤：**
1. 添加1000条记录
2. 测试列表滚动和筛选

**预期结果：**
- 列表流畅滚动
- 筛选响应迅速（<500ms）

#### P2 TC-147: 图表渲染性能
**测试步骤：**
1. 添加大量数据
2. 查看图表

**预期结果：**
- 图表渲染时间<2秒
- 交互流畅

#### P2 TC-148: 数据导入性能
**测试步骤：**
1. 导入1000条记录

**预期结果：**
- 导入时间<5秒
- 有进度提示

#### P2 TC-149: 统计计算性能
**测试步骤：**
1. 添加大量数据
2. 查看统计

**预期结果：**
- 统计计算时间<1秒
- 结果正确

#### P2 TC-150: 筛选性能
**测试步骤：**
1. 添加大量数据
2. 应用多个筛选条件

**预期结果：**
- 筛选响应时间<500ms
- 结果正确

---

## 测试总结

### 测试覆盖范围（全部150个用例）
- ✅ 记录添加功能（29个用例）
- ✅ 记录编辑功能（6个用例）
- ✅ 记录删除功能（3个用例）
- ✅ 列表展示功能（9个用例）
- ✅ 筛选功能（27个用例）
- ✅ 数据导入导出功能（10个用例）
- ✅ 数据清空功能（3个用例）
- ✅ 数据看板功能（13个用例）
- ✅ 边界条件和特殊场景（33个用例）
- ✅ UI/UX测试（10个用例）
- ✅ 性能测试（5个用例）

**总计：150个测试用例**

### 重点测试项
1. **时间计算**：跨天睡眠时长计算、21:00-23:59特殊处理、边界情况
2. **质量等级**：0-100分的等级划分（较差/一般/良好/优秀）
3. **时长等级**：过少/欠缺/正常/过多的边界值
4. **筛选功能**：多维度组合筛选
5. **数据完整性**：导入导出、数据一致性
6. **统计功能**：平均时间、规律性、熬穿/失眠天数、边界条件
7. **特殊场景**：大量数据、空数据、单条记录、跨年跨月

### 测试完成度
✅ **睡眠记录模块测试用例编写完成**

所有功能点、边界条件、异常情况和特殊场景均已覆盖。测试用例可用于全面测试睡眠记录模块的各项功能。

