# 书记模块测试用例

## 一、摘抄功能测试

### 1.1 摘抄添加功能

#### P0 TC-001: 添加摘抄 - 基本功能
**测试步骤：**
1. 在摘抄输入框输入内容："书中自有黄金屋"
2. 按 Ctrl+Enter 保存

**预期结果：**
- 摘抄成功添加到列表顶部
- 输入框清空
- 显示成功提示
- 时间戳正确记录

#### P1 TC-002: 添加摘抄 - 空内容
**测试步骤：**
1. 输入框为空
2. 按 Ctrl+Enter

**预期结果：**
- 不添加摘抄
- 无错误提示
- 输入框保持为空

#### P1 TC-003: 添加摘抄 - 仅空格
**测试步骤：**
1. 输入框只包含空格："   "
2. 按 Ctrl+Enter

**预期结果：**
- 不添加摘抄（空格会被trim）
- 无错误提示

#### P1 TC-004: 添加摘抄 - 最大长度
**测试步骤：**
1. 输入100个字符的内容
2. 按 Ctrl+Enter 保存

**预期结果：**
- 摘抄成功添加
- 字符计数显示 100/100

#### P1 TC-005: 添加摘抄 - 超过最大长度
**测试步骤：**
1. 尝试输入超过100个字符

**预期结果：**
- 输入框限制输入，无法输入超过100字符
- maxLength属性生效

#### P2 TC-006: 添加摘抄 - 特殊字符
**测试步骤：**
1. 输入包含特殊字符的内容："测试@#$%^&*()《》"
2. 按 Ctrl+Enter 保存

**预期结果：**
- 摘抄成功添加
- 特殊字符正确保存和显示

#### P2 TC-007: 添加摘抄 - 连续添加多条
**测试步骤：**
1. 添加第一条摘抄："第一段摘抄"
2. 立即添加第二条摘抄："第二段摘抄"
3. 查看列表

**预期结果：**
- 两条摘抄都成功添加
- 最新添加的在列表顶部
- 按时间倒序排列

#### P2 TC-008: 添加摘抄 - 字符计数显示
**测试步骤：**
1. 输入50个字符
2. 查看字符计数显示

**预期结果：**
- 显示 "50/100"
- 剩余字符数正确

#### P2 TC-009: 添加摘抄 - 字符计数警告
**测试步骤：**
1. 输入超过80个字符（接近100字符限制）

**预期结果：**
- 字符计数显示警告样式（如红色）
- 剩余字符数小于20时显示警告

### 1.2 摘抄编辑功能

#### P0 TC-010: 编辑摘抄 - 基本功能
**测试步骤：**
1. 点击一条摘抄
2. 修改内容
3. 按 Ctrl+Enter 保存

**预期结果：**
- 摘抄内容更新
- 退出编辑模式
- 输入框清空
- 时间戳更新

#### P2 TC-011: 编辑摘抄 - 取消编辑（ESC）
**测试步骤：**
1. 点击一条摘抄进入编辑模式
2. 修改内容
3. 按 ESC 键

**预期结果：**
- 内容恢复为原始值
- 退出编辑模式
- 输入框清空

#### P2 TC-012: 编辑摘抄 - 取消编辑（ESC）- 有未保存更改
**测试步骤：**
1. 点击一条摘抄进入编辑模式
2. 修改内容
3. 按 ESC 键

**预期结果：**
- 显示确认对话框
- 确认后取消编辑，内容恢复

#### P2 TC-013: 编辑摘抄 - 保存空内容
**测试步骤：**
1. 点击一条摘抄进入编辑模式
2. 删除所有内容
3. 按 Ctrl+Enter 保存

**预期结果：**
- 显示错误提示："摘抄内容不能为空！"
- 内容恢复为原始值
- 保持编辑模式

#### P2 TC-014: 编辑摘抄 - 保存仅空格内容
**测试步骤：**
1. 点击一条摘抄进入编辑模式
2. 输入仅包含空格的内容
3. 按 Ctrl+Enter 保存

**预期结果：**
- 显示错误提示："摘抄内容不能为空！"
- 内容恢复为原始值

#### P2 TC-015: 编辑摘抄 - 切换编辑目标
**测试步骤：**
1. 点击第一条摘抄进入编辑模式
2. 修改内容（不保存）
3. 点击第二条摘抄

**预期结果：**
- 显示确认对话框，提示有未保存的摘抄
- 确认后切换到第二条摘抄
- 第一条摘抄内容未改变

#### P2 TC-016: 编辑摘抄 - 点击当前编辑项
**测试步骤：**
1. 点击一条摘抄进入编辑模式
2. 再次点击同一条摘抄

**预期结果：**
- 如果有未保存更改，显示确认对话框
- 确认后退出编辑模式
- 输入框清空

#### P2 TC-017: 编辑摘抄 - 编辑后字符计数更新
**测试步骤：**
1. 点击一条摘抄进入编辑模式
2. 修改内容长度

**预期结果：**
- 字符计数实时更新
- 显示正确的字符数/100

### 1.3 摘抄删除功能

#### P0 TC-018: 删除摘抄 - 基本功能
**测试步骤：**
1. 点击一条摘抄的删除按钮
2. 确认删除

**预期结果：**
- 摘抄从列表中移除
- 列表更新显示

#### P2 TC-019: 删除摘抄 - 删除正在编辑的摘抄
**测试步骤：**
1. 点击一条摘抄进入编辑模式
2. 点击该摘抄的删除按钮
3. 确认删除

**预期结果：**
- 摘抄被删除
- 编辑面板清空
- 退出编辑模式

#### P2 TC-020: 删除摘抄 - 取消删除
**测试步骤：**
1. 点击一条摘抄的删除按钮
2. 在确认对话框中点击取消

**预期结果：**
- 摘抄未被删除
- 列表保持不变

#### P2 TC-021: 删除摘抄 - 删除最后一条
**测试步骤：**
1. 仅剩一条摘抄
2. 删除该摘抄

**预期结果：**
- 摘抄被删除
- 显示空状态提示

### 1.4 摘抄搜索功能

#### P1 TC-022: 搜索摘抄 - 基本功能
**测试步骤：**
1. 在搜索框输入关键词："书"
2. 查看搜索结果

**预期结果：**
- 只显示包含"书"的摘抄
- 其他摘抄被过滤
- 搜索不区分大小写

#### P2 TC-023: 搜索摘抄 - 无结果
**测试步骤：**
1. 在搜索框输入不存在的关键词："不存在的内容"

**预期结果：**
- 列表为空
- 显示空状态（如果有）

#### P2 TC-024: 搜索摘抄 - 清空搜索
**测试步骤：**
1. 输入搜索关键词
2. 清空搜索框

**预期结果：**
- 显示所有摘抄
- 列表恢复正常

#### P2 TC-025: 搜索摘抄 - 搜索特殊字符
**测试步骤：**
1. 输入包含特殊字符的搜索词："@#$"

**预期结果：**
- 搜索功能正常工作
- 能正确匹配包含特殊字符的摘抄

#### P2 TC-026: 搜索摘抄 - 搜索空格
**测试步骤：**
1. 输入多个空格作为搜索词

**预期结果：**
- 显示所有摘抄（空格被trim）
- 或显示空结果（取决于实现）

### 1.5 摘抄导入导出功能

#### P1 TC-027: 导出摘抄 - 基本功能
**测试步骤：**
1. 有若干条摘抄
2. 点击导出按钮
3. 确认导出

**预期结果：**
- 下载JSON文件
- 文件名格式正确（reading-quicknotes-YYYY-MM-DD.json）
- 文件包含所有摘抄数据

#### P2 TC-028: 导出摘抄 - 空列表
**测试步骤：**
1. 没有任何摘抄
2. 点击导出按钮

**预期结果：**
- 可以导出
- 导出文件包含空数组
- 文件格式正确

#### P1 TC-029: 导入摘抄 - 基本功能
**测试步骤：**
1. 准备有效的JSON文件
2. 点击导入按钮
3. 选择文件

**预期结果：**
- 导入成功
- 显示导入结果提示（新增X条，跳过X条）
- 摘抄列表更新

#### P2 TC-030: 导入摘抄 - 重复数据
**测试步骤：**
1. 已有若干条摘抄
2. 导入包含重复ID的摘抄文件

**预期结果：**
- 重复的摘抄被跳过
- 只导入新的摘抄
- 显示跳过数量

#### P3 TC-031: 导入摘抄 - 无效文件格式
**测试步骤：**
1. 选择非JSON文件（如.txt文件）
2. 尝试导入

**预期结果：**
- 显示错误提示："只支持JSON格式文件"
- 导入失败

#### P3 TC-032: 导入摘抄 - 文件过大
**测试步骤：**
1. 准备超过10MB的JSON文件
2. 尝试导入

**预期结果：**
- 显示错误提示："文件大小不能超过10MB"
- 导入失败

#### P3 TC-033: 导入摘抄 - 文件格式错误
**测试步骤：**
1. 准备格式错误的JSON文件
2. 尝试导入

**预期结果：**
- 显示错误提示："文件格式错误，请确保是有效的JSON文件"
- 导入失败

#### P2 TC-034: 导入摘抄 - 缺少必要字段
**测试步骤：**
1. 准备缺少id或content字段的JSON文件
2. 尝试导入

**预期结果：**
- 缺少字段的记录被跳过
- 其他有效记录正常导入
- 显示跳过数量

#### P1 TC-035: 删除所有摘抄 - 基本功能
**测试步骤：**
1. 有若干条摘抄
2. 点击删除所有按钮
3. 确认删除

**预期结果：**
- 所有摘抄被删除
- 显示删除成功提示
- 列表为空

#### P2 TC-036: 删除所有摘抄 - 空列表
**测试步骤：**
1. 没有任何摘抄
2. 点击删除所有按钮

**预期结果：**
- 显示提示："没有摘抄可以删除"
- 不执行删除操作

---

## 二、书记功能测试

### 2.1 书记创建功能

#### P0 TC-037: 创建书记 - 基本功能
**测试步骤：**
1. 点击新建按钮
2. 输入内容："今天读了一本好书"
3. 按 Ctrl+Enter 保存

**预期结果：**
- 书记成功创建
- 显示保存成功提示
- 日期默认为今天
- 主题、天气、心情为默认值

#### P1 TC-038: 创建书记 - 空内容保存
**测试步骤：**
1. 点击新建按钮
2. 不输入任何内容
3. 按 Ctrl+Enter 保存

**预期结果：**
- 不创建书记（空内容会被忽略）
- 无错误提示

#### P1 TC-039: 创建书记 - 仅空格内容
**测试步骤：**
1. 点击新建按钮
2. 输入仅包含空格的内容
3. 按 Ctrl+Enter 保存

**预期结果：**
- 不创建书记（空格会被trim）
- 无错误提示

#### P1 TC-040: 创建书记 - 选择日期
**测试步骤：**
1. 点击新建按钮
2. 选择不同的日期
3. 输入内容并保存

**预期结果：**
- 书记以选择的日期保存
- 日期显示正确

#### P1 TC-041: 创建书记 - 选择主题颜色
**测试步骤：**
1. 点击新建按钮
2. 选择预设主题颜色
3. 输入内容并保存

**预期结果：**
- 书记背景色为选择的主题色
- 主题色正确保存

#### P1 TC-042: 创建书记 - 自定义主题颜色
**测试步骤：**
1. 点击新建按钮
2. 打开主题选择器
3. 选择自定义颜色
4. 点击"应用自定义颜色"
5. 输入内容并保存

**预期结果：**
- 书记背景色为自定义颜色
- 自定义颜色正确保存

#### P1 TC-043: 创建书记 - 选择天气
**测试步骤：**
1. 点击新建按钮
2. 选择天气（如"雨天"）
3. 输入内容并保存

**预期结果：**
- 天气信息正确保存
- 在列表中显示对应的天气图标

#### P1 TC-044: 创建书记 - 选择心情
**测试步骤：**
1. 点击新建按钮
2. 选择心情（如"开心"）
3. 输入内容并保存

**预期结果：**
- 心情信息正确保存
- 在列表中显示对应的心情图标

#### P1 TC-045: 创建书记 - 选择字体
**测试步骤：**
1. 点击新建按钮
2. 选择字体（如"楷体"）
3. 输入内容并保存

**预期结果：**
- 字体正确保存
- 内容以选择的字体显示

#### P1 TC-046: 创建书记 - 上传图片
**测试步骤：**
1. 点击新建按钮
2. 点击上传图片按钮
3. 选择图片文件（小于5MB）
4. 输入内容并保存

**预期结果：**
- 图片成功上传
- 图片显示在左上角固定区域
- 图片以base64格式保存

#### P1 TC-047: 创建书记 - 上传图片文件过大
**测试步骤：**
1. 点击新建按钮
2. 选择超过5MB的图片文件

**预期结果：**
- 显示错误提示："图片大小不能超过 5MB"
- 图片未上传

#### P1 TC-048: 创建书记 - 上传非图片文件
**测试步骤：**
1. 点击新建按钮
2. 选择非图片文件（如.txt文件）

**预期结果：**
- 显示错误提示："请选择图片文件"
- 文件未上传

#### P1 TC-049: 创建书记 - 删除图片
**测试步骤：**
1. 上传图片后
2. 点击图片删除按钮

**预期结果：**
- 图片被删除
- 显示删除成功提示
- 上传按钮重新显示

#### P1 TC-050: 创建书记 - 新建时检测未保存更改
**测试步骤：**
1. 在编辑区域输入内容（未保存）
2. 点击新建按钮

**预期结果：**
- 显示确认对话框："当前有未保存的书记，是否继续当前操作？"
- 确认后创建新书记
- 取消后保持当前状态

### 2.2 书记编辑功能

#### P0 TC-051: 编辑书记 - 基本功能
**测试步骤：**
1. 点击列表中的一篇书记
2. 修改内容
3. 按 Ctrl+Enter 保存

**预期结果：**
- 书记内容更新
- 显示保存成功提示
- updatedAt时间戳更新

#### P1 TC-052: 编辑书记 - 修改日期
**测试步骤：**
1. 点击一篇书记
2. 修改日期
3. 保存

**预期结果：**
- 日期更新成功
- 列表按新日期排序

#### P1 TC-053: 编辑书记 - 修改主题颜色
**测试步骤：**
1. 点击一篇书记
2. 修改主题颜色
3. 保存

**预期结果：**
- 主题颜色更新
- 背景色立即更新显示

#### P1 TC-054: 编辑书记 - 修改天气
**测试步骤：**
1. 点击一篇书记
2. 修改天气
3. 保存

**预期结果：**
- 天气信息更新
- 列表中显示新的天气图标

#### P1 TC-055: 编辑书记 - 修改心情
**测试步骤：**
1. 点击一篇书记
2. 修改心情
3. 保存

**预期结果：**
- 心情信息更新
- 列表中显示新的心情图标

#### P1 TC-056: 编辑书记 - 修改字体
**测试步骤：**
1. 点击一篇书记
2. 修改字体
3. 保存

**预期结果：**
- 字体更新
- 内容以新字体显示

#### P1 TC-057: 编辑书记 - 替换图片
**测试步骤：**
1. 点击一篇有图片的书记
2. 上传新图片替换旧图片
3. 保存

**预期结果：**
- 旧图片被替换
- 新图片正确显示
- 图片数据更新

#### P1 TC-058: 编辑书记 - 清空内容后保存
**测试步骤：**
1. 点击一篇书记
2. 删除所有内容
3. 按 Ctrl+Enter 保存

**预期结果：**
- 书记被删除（空内容视为删除）
- 静默删除，无确认对话框
- 列表更新

#### P1 TC-059: 编辑书记 - 切换书记时检测未保存更改
**测试步骤：**
1. 点击一篇书记
2. 修改内容（未保存）
3. 点击另一篇书记

**预期结果：**
- 显示确认对话框："当前有未保存的书记，是否继续当前操作？"
- 确认后切换到另一篇
- 取消后保持当前状态

#### P2 TC-060: 编辑书记 - 点击当前查看的书记
**测试步骤：**
1. 点击一篇书记查看
2. 再次点击同一篇书记

**预期结果：**
- 不执行任何操作
- 保持当前状态

#### P2 TC-061: 编辑书记 - 修改后取消（切换模式）
**测试步骤：**
1. 编辑一篇书记
2. 修改内容（未保存）
3. 切换到其他模块

**预期结果：**
- 显示确认对话框，提示有未保存的书记
- 确认后切换模块
- 取消后保持当前状态

### 2.3 书记删除功能

#### P0 TC-062: 删除书记 - 基本功能
**测试步骤：**
1. 点击一篇书记的删除按钮
2. 确认删除

**预期结果：**
- 显示确认对话框："确定要删除这篇书记吗？删除后将无法恢复！"
- 确认后书记被删除
- 显示删除成功提示

#### P2 TC-063: 删除书记 - 取消删除
**测试步骤：**
1. 点击删除按钮
2. 在确认对话框中点击取消

**预期结果：**
- 书记未被删除
- 列表保持不变

#### P1 TC-064: 删除书记 - 删除当前查看的书记
**测试步骤：**
1. 点击一篇书记查看
2. 删除该书记
3. 确认删除

**预期结果：**
- 书记被删除
- 如果有其他书记，显示第一篇
- 如果没有其他书记，显示新建页

#### P2 TC-065: 删除书记 - 删除最后一篇
**测试步骤：**
1. 仅剩一篇书记
2. 删除该书记
3. 确认删除

**预期结果：**
- 书记被删除
- 显示新建页（空白状态）
- 显示空状态提示

#### P1 TC-066: 删除所有书记 - 基本功能
**测试步骤：**
1. 有若干篇书记
2. 点击删除所有按钮
3. 确认删除

**预期结果：**
- 显示确认对话框，提示删除数量
- 确认后所有书记被删除
- 显示删除成功提示
- 显示新建页

#### P2 TC-067: 删除所有书记 - 空列表
**测试步骤：**
1. 没有任何书记
2. 点击删除所有按钮

**预期结果：**
- 显示提示："没有书记可以删除"
- 不执行删除操作

### 2.4 书记搜索功能

#### P1 TC-068: 搜索书记 - 基本功能
**测试步骤：**
1. 在搜索框输入关键词："阅读"
2. 查看搜索结果

**预期结果：**
- 只显示内容包含"阅读"的书记
- 其他书记被过滤
- 搜索不区分大小写

#### P2 TC-069: 搜索书记 - 无结果
**测试步骤：**
1. 在搜索框输入不存在的关键词："不存在的内容"

**预期结果：**
- 列表为空
- 显示空状态提示

#### P2 TC-070: 搜索书记 - 清空搜索
**测试步骤：**
1. 输入搜索关键词
2. 清空搜索框

**预期结果：**
- 显示所有书记
- 列表恢复正常

#### P2 TC-071: 搜索书记 - 搜索HTML标签内容
**测试步骤：**
1. 输入搜索词，匹配富文本内容中的文本

**预期结果：**
- 能正确搜索到HTML内容中的纯文本
- 搜索功能正常工作

#### P2 TC-072: 搜索书记 - 搜索特殊字符
**测试步骤：**
1. 输入包含特殊字符的搜索词

**预期结果：**
- 搜索功能正常工作
- 能正确匹配包含特殊字符的内容

### 2.5 书记导入导出功能

#### P0 TC-073: 导出所有书记 - 基本功能
**测试步骤：**
1. 有若干篇书记
2. 点击导出所有按钮
3. 确认导出

**预期结果：**
- 下载JSON文件
- 文件名格式正确（reading-entries-YYYY-MM-DD.json）
- 文件包含所有书记数据（包括图片base64）

#### P2 TC-074: 导出所有书记 - 空列表
**测试步骤：**
1. 没有任何书记
2. 点击导出所有按钮

**预期结果：**
- 可以导出
- 导出文件包含空数组
- 文件格式正确

#### P1 TC-075: 导出所有书记 - 包含图片的书记
**测试步骤：**
1. 有包含图片的书记
2. 导出所有书记

**预期结果：**
- 图片以base64格式导出
- 导出文件包含完整的图片数据
- 文件大小可能较大

#### P0 TC-076: 导入书记 - 基本功能
**测试步骤：**
1. 准备有效的JSON文件
2. 点击导入按钮
3. 选择文件

**预期结果：**
- 导入成功
- 显示导入结果提示（新增X篇，跳过X篇）
- 书记列表更新

#### P2 TC-077: 导入书记 - 重复数据
**测试步骤：**
1. 已有若干篇书记
2. 导入包含重复ID的书记文件

**预期结果：**
- 重复的书记被跳过
- 只导入新的书记
- 显示跳过数量

#### P3 TC-078: 导入书记 - 无效文件格式
**测试步骤：**
1. 选择非JSON文件（如.txt文件）
2. 尝试导入

**预期结果：**
- 显示错误提示："只支持JSON格式文件"
- 导入失败

#### P3 TC-079: 导入书记 - 文件过大
**测试步骤：**
1. 准备超过10MB的JSON文件
2. 尝试导入

**预期结果：**
- 显示错误提示："文件大小不能超过10MB"
- 导入失败

#### P3 TC-080: 导入书记 - 文件格式错误
**测试步骤：**
1. 准备格式错误的JSON文件
2. 尝试导入

**预期结果：**
- 显示错误提示："文件格式错误，请确保是有效的JSON文件"
- 导入失败

#### P2 TC-081: 导入书记 - 缺少必要字段
**测试步骤：**
1. 准备缺少id或date字段的JSON文件
2. 尝试导入

**预期结果：**
- 缺少字段的记录被跳过
- 其他有效记录正常导入
- 显示跳过数量

#### P1 TC-082: 导入书记 - 包含图片数据
**测试步骤：**
1. 准备包含图片base64数据的JSON文件
2. 导入文件

**预期结果：**
- 图片数据正确导入
- 书记中图片正确显示

#### P2 TC-083: 导入书记 - 图片格式验证
**测试步骤：**
1. 准备包含无效图片格式的JSON文件
2. 尝试导入

**预期结果：**
- 导入成功（图片格式警告不影响导入）
- 或显示警告信息

### 2.6 单篇书记导出功能

#### P1 TC-084: 导出单篇书记 - TXT格式（无图片）
**测试步骤：**
1. 选择一篇没有图片的书记
2. 点击导出按钮
3. 选择TXT格式

**预期结果：**
- 下载TXT文件
- 文件名格式：书记_YYYY.MM.DD.txt
- 文件包含纯文本内容（不含图片）

#### P1 TC-085: 导出单篇书记 - DOC格式（无图片）
**测试步骤：**
1. 选择一篇没有图片的书记
2. 点击导出按钮
3. 选择DOC格式

**预期结果：**
- 下载DOC文件
- 文件名格式：书记_YYYY.MM.DD.doc
- 文件包含HTML格式内容，保留格式

#### P1 TC-086: 导出单篇书记 - MD格式（无图片）
**测试步骤：**
1. 选择一篇没有图片的书记
2. 点击导出按钮
3. 选择MD格式

**预期结果：**
- 下载MD文件
- 文件名格式：书记_YYYY.MM.DD.md
- 文件包含Markdown格式内容

#### P2 TC-087: 导出单篇书记 - PDF格式（无图片）
**测试步骤：**
1. 选择一篇没有图片的书记
2. 点击导出按钮
3. 选择PDF格式

**预期结果：**
- 打开打印预览窗口
- 提示选择"另存为PDF"
- 可以保存为PDF文件

#### P2 TC-088: 导出单篇书记 - PDF格式（有图片）
**测试步骤：**
1. 选择一篇有图片的书记
2. 点击导出按钮
3. 查看导出选项

**预期结果：**
- 只显示PDF导出选项（有图片时只支持PDF）
- 导出PDF包含图片

#### P2 TC-089: 导出单篇书记 - 导出菜单交互
**测试步骤：**
1. 点击导出按钮
2. 查看导出菜单
3. 点击外部区域

**预期结果：**
- 导出菜单显示
- 点击外部后菜单关闭

#### P2 TC-090: 导出单篇书记 - 导出菜单点击阻止冒泡
**测试步骤：**
1. 点击导出按钮打开菜单
2. 点击导出菜单中的选项

**预期结果：**
- 菜单选项点击不会触发书记加载
- 执行导出操作

### 2.7 主题选择功能

#### P1 TC-091: 主题选择 - 预设主题
**测试步骤：**
1. 鼠标悬停在主题按钮上
2. 查看预设主题列表
3. 点击一个预设主题

**预期结果：**
- 主题选择器显示
- 显示多个预设主题颜色圆圈
- 点击后背景色立即更新

#### P1 TC-092: 主题选择 - 自定义颜色选择器
**测试步骤：**
1. 打开主题选择器
2. 使用颜色选择器选择颜色
3. 点击"应用自定义颜色"

**预期结果：**
- 颜色选择器显示
- 可以选择任意颜色
- 应用后背景色更新

#### P2 TC-093: 主题选择 - 鼠标离开延迟关闭
**测试步骤：**
1. 打开主题选择器
2. 鼠标移出选择器区域

**预期结果：**
- 选择器延迟350ms后关闭
- 如果鼠标重新进入，选择器保持打开

#### P2 TC-094: 主题选择 - 多个选择器互斥
**测试步骤：**
1. 打开主题选择器
2. 打开天气选择器

**预期结果：**
- 主题选择器自动关闭
- 只显示天气选择器

### 2.8 天气选择功能

#### P1 TC-095: 天气选择 - 基本功能
**测试步骤：**
1. 鼠标悬停在天气按钮上
2. 选择一个天气选项

**预期结果：**
- 天气选择器显示
- 显示所有天气选项（带图标）
- 选择后按钮图标更新

#### P2 TC-096: 天气选择 - 所有选项
**测试步骤：**
1. 打开天气选择器
2. 查看所有天气选项

**预期结果：**
- 显示所有预设天气选项
- 每个选项有对应的图标和文字

#### P2 TC-097: 天气选择 - 选择器交互
**测试步骤：**
1. 打开天气选择器
2. 鼠标移出选择器

**预期结果：**
- 选择器延迟关闭
- 交互流畅

### 2.9 心情选择功能

#### P1 TC-098: 心情选择 - 基本功能
**测试步骤：**
1. 鼠标悬停在心情按钮上
2. 选择一个心情选项

**预期结果：**
- 心情选择器显示
- 显示所有心情选项（带图标）
- 选择后按钮图标更新

#### P2 TC-099: 心情选择 - 所有选项
**测试步骤：**
1. 打开心情选择器
2. 查看所有心情选项

**预期结果：**
- 显示所有预设心情选项
- 每个选项有对应的图标和文字

#### P2 TC-100: 心情选择 - 选择器交互
**测试步骤：**
1. 打开心情选择器
2. 鼠标移出选择器

**预期结果：**
- 选择器延迟关闭
- 交互流畅

### 2.10 字体选择功能

#### P1 TC-101: 字体选择 - 基本功能
**测试步骤：**
1. 鼠标悬停在字体按钮上
2. 选择一个字体选项

**预期结果：**
- 字体选择器显示
- 显示所有字体选项
- 选择后内容字体立即更新

#### P2 TC-102: 字体选择 - 所有字体选项
**测试步骤：**
1. 打开字体选择器
2. 查看所有字体选项

**预期结果：**
- 显示所有预设字体选项
- 每个选项以对应字体显示

#### P2 TC-103: 字体选择 - 字体预览
**测试步骤：**
1. 打开字体选择器
2. 查看字体选项的显示

**预期结果：**
- 每个字体选项以对应字体显示
- 可以预览字体效果

#### P2 TC-104: 字体选择 - 选择器交互
**测试步骤：**
1. 打开字体选择器
2. 鼠标移出选择器

**预期结果：**
- 选择器延迟关闭
- 交互流畅

#### P2 TC-105: 字体选择 - 多个选择器互斥
**测试步骤：**
1. 打开字体选择器
2. 打开主题选择器

**预期结果：**
- 字体选择器自动关闭
- 只显示主题选择器

### 2.11 富文本编辑功能

#### P1 TC-106: 富文本编辑 - 加粗文本
**测试步骤：**
1. 选中一段文本
2. 点击BubbleMenu中的加粗按钮（B）

**预期结果：**
- 文本变为加粗
- 加粗按钮显示激活状态
- 再次点击取消加粗

#### P1 TC-107: 富文本编辑 - 斜体文本
**测试步骤：**
1. 选中一段文本
2. 点击BubbleMenu中的斜体按钮（I）

**预期结果：**
- 文本变为斜体
- 斜体按钮显示激活状态
- 再次点击取消斜体

#### P2 TC-108: 富文本编辑 - 删除线文本
**测试步骤：**
1. 选中一段文本
2. 点击BubbleMenu中的删除线按钮（S）

**预期结果：**
- 文本添加删除线
- 删除线按钮显示激活状态
- 再次点击取消删除线

#### P1 TC-109: 富文本编辑 - 下划线文本
**测试步骤：**
1. 选中一段文本
2. 点击BubbleMenu中的下划线按钮（U）

**预期结果：**
- 文本添加下划线
- 下划线按钮显示激活状态
- 再次点击取消下划线

#### P1 TC-110: 富文本编辑 - 文字颜色
**测试步骤：**
1. 选中一段文本
2. 点击BubbleMenu中的文字颜色按钮

**预期结果：**
- 文字颜色改变
- 对应的颜色按钮显示激活状态
- 可以切换不同颜色

#### P1 TC-111: 富文本编辑 - 高亮文本
**测试步骤：**
1. 选中一段文本
2. 点击BubbleMenu中的高亮颜色按钮

**预期结果：**
- 文本添加高亮背景色
- 对应的高亮按钮显示激活状态
- 可以切换不同高亮颜色

#### P2 TC-112: 富文本编辑 - 取消高亮
**测试步骤：**
1. 选中已高亮的文本
2. 点击透明高亮按钮（取消高亮）

**预期结果：**
- 高亮被移除
- 文本恢复正常背景

#### P2 TC-113: 富文本编辑 - 组合格式
**测试步骤：**
1. 选中一段文本
2. 依次应用加粗、斜体、下划线、文字颜色、高亮

**预期结果：**
- 所有格式都正确应用
- 文本显示所有格式效果
- 各按钮都显示激活状态

#### P1 TC-114: 富文本编辑 - BubbleMenu显示时机
**测试步骤：**
1. 在编辑器中选中文本

**预期结果：**
- BubbleMenu工具栏显示
- 工具栏位置跟随选中文本

#### P2 TC-115: 富文本编辑 - BubbleMenu隐藏时机
**测试步骤：**
1. 选中文本显示BubbleMenu
2. 取消选中（点击空白处）

**预期结果：**
- BubbleMenu工具栏隐藏

#### P2 TC-116: 富文本编辑 - 按钮状态同步
**测试步骤：**
1. 选中加粗的文本
2. 查看BubbleMenu中加粗按钮状态

**预期结果：**
- 加粗按钮显示激活状态（is-active类）
- 按钮状态与文本格式同步

#### P2 TC-117: 富文本编辑 - 多行文本选择
**测试步骤：**
1. 选中多行文本
2. 应用格式

**预期结果：**
- 格式正确应用到所有选中文本
- BubbleMenu正常显示

#### P1 TC-118: 富文本编辑 - 格式保存和加载
**测试步骤：**
1. 输入文本并应用格式
2. 保存书记
3. 重新加载该书记

**预期结果：**
- 格式正确保存
- 重新加载后格式完整保留

### 2.12 日期选择器功能

#### P1 TC-119: 日期选择 - 基本功能
**测试步骤：**
1. 点击日期显示区域
2. 选择一个日期

**预期结果：**
- 日期选择器显示
- 选择的日期正确更新
- 日期格式正确显示

#### P1 TC-120: 日期选择 - 最小日期限制
**测试步骤：**
1. 打开日期选择器
2. 尝试选择2024-01-01之前的日期

**预期结果：**
- 2024-01-01之前的日期不可选择
- 最小日期限制生效

#### P2 TC-121: 日期选择 - 选择今天
**测试步骤：**
1. 打开日期选择器
2. 选择今天的日期

**预期结果：**
- 日期更新为今天
- 显示正确

#### P2 TC-122: 日期选择 - 选择未来日期
**测试步骤：**
1. 打开日期选择器
2. 选择未来的日期

**预期结果：**
- 日期可以更新为未来日期
- 日期选择器正常工作

#### P2 TC-123: 日期选择 - 日期格式显示
**测试步骤：**
1. 选择不同日期
2. 查看日期显示格式

**预期结果：**
- 日期以正确格式显示（如YYYY-MM-DD）
- 格式一致

### 2.13 列表显示和排序

#### P1 TC-124: 列表显示 - 基本功能
**测试步骤：**
1. 有多篇书记
2. 查看列表

**预期结果：**
- 所有书记正确显示
- 显示日期、时间、天气、心情图标
- 显示内容预览

#### P1 TC-125: 列表排序 - 按日期倒序
**测试步骤：**
1. 创建不同日期的书记
2. 查看列表排序

**预期结果：**
- 按日期倒序排列（最新的在前）
- 排序正确

#### P2 TC-126: 列表排序 - 同日期按创建时间倒序
**测试步骤：**
1. 在同一天创建多篇书记
2. 查看列表排序

**预期结果：**
- 同一天的书记按创建时间倒序排列
- 最新创建的在前

#### P1 TC-127: 列表显示 - 当前选中项高亮
**测试步骤：**
1. 点击一篇书记
2. 查看列表

**预期结果：**
- 当前查看的书记在列表中高亮显示
- 有active样式

#### P1 TC-128: 列表显示 - 内容预览
**测试步骤：**
1. 创建一篇长内容的书记
2. 查看列表中的预览

**预期结果：**
- 显示内容前100个字符
- 超过100字符显示"..."
- 预览为纯文本（去除HTML标签）

#### P1 TC-129: 列表显示 - 图片预览
**测试步骤：**
1. 创建一篇带图片的书记
2. 查看列表

**预期结果：**
- 在预览区域显示图片缩略图
- 图片尺寸合适（64x64px）
- 图片圆角显示

#### P2 TC-130: 列表显示 - 主题色背景
**测试步骤：**
1. 创建不同主题色的书记
2. 查看列表

**预期结果：**
- 每个书记项显示对应的主题色背景
- 背景色正确

#### P2 TC-131: 列表显示 - 字体预览
**测试步骤：**
1. 创建使用不同字体的书记
2. 查看列表预览

**预期结果：**
- 预览文本以对应字体显示
- 字体正确应用

#### P0 TC-132: 列表显示 - 空状态
**测试步骤：**
1. 没有任何书记
2. 查看列表

**预期结果：**
- 显示空状态提示
- 有友好的提示文字和图标

#### P2 TC-133: 列表显示 - 时间显示格式
**测试步骤：**
1. 查看列表中的时间显示

**预期结果：**
- 时间格式正确（如HH:MM）
- 时间显示清晰

### 2.14 边界条件和异常情况

#### P2 TC-134: 边界条件 - 摘抄最大长度边界
**测试步骤：**
1. 输入99个字符
2. 再输入1个字符
3. 尝试继续输入

**预期结果：**
- 99个字符可以输入
- 100个字符可以输入
- 超过100个字符无法输入

#### P2 TC-135: 边界条件 - 图片大小边界
**测试步骤：**
1. 选择4.9MB的图片
2. 选择5.1MB的图片

**预期结果：**
- 4.9MB图片可以上传
- 5.1MB图片显示错误提示

#### P2 TC-136: 边界条件 - 导入文件大小边界
**测试步骤：**
1. 准备9.9MB的JSON文件
2. 准备10.1MB的JSON文件

**预期结果：**
- 9.9MB文件可以导入
- 10.1MB文件显示错误提示

#### P2 TC-137: 边界条件 - 大量摘抄数据
**测试步骤：**
1. 创建100条摘抄
2. 查看列表性能

**预期结果：**
- 列表正常显示
- 滚动流畅
- 搜索功能正常

#### P2 TC-138: 边界条件 - 大量书记数据
**测试步骤：**
1. 创建100篇书记
2. 查看列表性能

**预期结果：**
- 列表正常显示
- 滚动流畅
- 搜索功能正常

#### P2 TC-139: 边界条件 - 超长文本内容
**测试步骤：**
1. 创建一篇包含大量文本的书记
2. 保存并重新加载

**预期结果：**
- 内容正确保存
- 重新加载后内容完整
- 编辑器正常显示

#### P2 TC-140: 边界条件 - 特殊字符内容
**测试步骤：**
1. 创建包含大量特殊字符的书记
2. 保存并重新加载

**预期结果：**
- 特殊字符正确保存
- 重新加载后显示正确
- 无乱码

#### P2 TC-141: 边界条件 - 同一天多篇书记
**测试步骤：**
1. 在同一天创建多篇书记
2. 查看列表

**预期结果：**
- 所有书记都正确保存
- 列表正确显示
- 排序正确

#### P2 TC-142: 边界条件 - 快速连续操作
**测试步骤：**
1. 快速连续添加多条摘抄
2. 快速连续创建多篇书记

**预期结果：**
- 所有操作都成功
- 数据正确保存
- 无数据丢失

#### P2 TC-143: 异常情况 - localStorage存储失败
**测试步骤：**
1. 模拟localStorage存储失败
2. 尝试保存数据

**预期结果：**
- 显示错误提示
- 或静默失败（取决于实现）
- 不影响其他功能

#### P2 TC-144: 异常情况 - 导入文件损坏
**测试步骤：**
1. 准备损坏的JSON文件
2. 尝试导入

**预期结果：**
- 显示错误提示
- 导入失败
- 现有数据不受影响

#### P2 TC-145: 异常情况 - 图片读取失败
**测试步骤：**
1. 选择图片文件
2. 模拟文件读取失败

**预期结果：**
- 显示错误提示："图片读取失败，请重试"
- 图片未上传

### 2.15 UI/UX测试

#### P2 TC-146: UI/UX - 响应式布局
**测试步骤：**
1. 在不同屏幕尺寸下查看书记页面

**预期结果：**
- 布局自适应
- 内容正常显示
- 无横向滚动条

#### P2 TC-147: UI/UX - 操作反馈 - 保存成功
**测试步骤：**
1. 保存一篇书记

**预期结果：**
- 显示"保存成功"提示
- 提示在2秒后自动消失
- 提示位置在顶部居中

#### P2 TC-148: UI/UX - 操作反馈 - 删除确认
**测试步骤：**
1. 点击删除书记按钮

**预期结果：**
- 显示确认对话框
- 明确提示删除操作不可撤销

#### P2 TC-149: UI/UX - 加载状态 - 导入数据
**测试步骤：**
1. 选择大文件进行导入

**预期结果：**
- 显示加载状态
- 按钮显示导入中状态
- 导入完成后状态恢复

#### P0 TC-150: UI/UX - 空状态提示 - 无摘抄
**测试步骤：**
1. 没有任何摘抄时查看摘抄列表

**预期结果：**
- 显示友好的空状态提示
- 有引导性文字："还没有摘抄"
- 有提示："开始记录你喜爱的摘抄吧~"

#### P0 TC-151: UI/UX - 空状态提示 - 无书记
**测试步骤：**
1. 没有任何书记时查看书记列表

**预期结果：**
- 显示友好的空状态提示
- 有引导性文字："还没有书记哦"
- 有提示："在中间写下你的第一篇书记吧！"

#### P2 TC-152: UI/UX - 时间轴显示
**测试步骤：**
1. 查看摘抄列表的时间轴

**预期结果：**
- 时间轴正确显示
- 高度动态调整
- 视觉效果好

#### P2 TC-153: UI/UX - 笔记本样式
**测试步骤：**
1. 查看书记编辑区域

**预期结果：**
- 显示笔记本样式
- 有竖线和横线
- 视觉效果美观

#### P2 TC-154: UI/UX - 图片上传区域
**测试步骤：**
1. 查看图片上传区域

**预期结果：**
- 上传按钮清晰可见
- 有提示文字："上传书籍封面"
- 图片显示区域固定

#### P2 TC-155: UI/UX - 选择器动画
**测试步骤：**
1. 打开各种选择器（主题、天气、心情、字体）

**预期结果：**
- 选择器有平滑的显示/隐藏动画
- 交互流畅

### 2.16 数据一致性测试

#### P0 TC-156: 数据一致性 - 刷新页面
**测试步骤：**
1. 创建若干摘抄和书记
2. 刷新页面

**预期结果：**
- 所有数据保持
- 列表正确显示
- 数据完整

#### P0 TC-157: 数据一致性 - 关闭浏览器
**测试步骤：**
1. 创建若干摘抄和书记
2. 关闭浏览器
3. 重新打开

**预期结果：**
- 所有数据保持
- 数据完整
- 功能正常

#### P1 TC-158: 数据一致性 - 导出导入一致性
**测试步骤：**
1. 导出所有数据
2. 清空所有数据
3. 导入刚才导出的文件

**预期结果：**
- 所有数据恢复
- 摘抄和书记数量一致
- 内容、主题、天气、心情等字段完整

#### P2 TC-159: 数据一致性 - 编辑后立即保存
**测试步骤：**
1. 编辑一篇书记
2. 立即保存
3. 刷新页面

**预期结果：**
- 编辑内容正确保存
- 刷新后内容正确

#### P2 TC-160: 数据一致性 - 删除后数据更新
**测试步骤：**
1. 删除一篇书记
2. 刷新页面

**预期结果：**
- 书记已被删除
- 列表正确更新
- 数据一致

---

## 测试总结

### 测试覆盖范围（全部160个用例）
- ✅ 摘抄添加功能（9个用例）
- ✅ 摘抄编辑功能（8个用例）
- ✅ 摘抄删除功能（4个用例）
- ✅ 摘抄搜索功能（5个用例）
- ✅ 摘抄导入导出功能（10个用例）
- ✅ 书记创建功能（14个用例）
- ✅ 书记编辑功能（11个用例）
- ✅ 书记删除功能（6个用例）
- ✅ 书记搜索功能（5个用例）
- ✅ 书记导入导出功能（11个用例）
- ✅ 单篇书记导出功能（7个用例）
- ✅ 主题选择功能（4个用例）
- ✅ 天气选择功能（3个用例）
- ✅ 心情选择功能（3个用例）
- ✅ 字体选择功能（5个用例）
- ✅ 富文本编辑功能（13个用例）- 加粗、斜体、删除线、下划线、文字颜色、高亮、组合格式
- ✅ BubbleMenu工具栏交互（3个用例）
- ✅ 日期选择器功能（5个用例）
- ✅ 列表显示和排序（10个用例）
- ✅ 边界条件和异常情况（12个用例）
- ✅ UI/UX测试（10个用例）
- ✅ 数据一致性测试（5个用例）

**总计：160个测试用例**

### 重点测试项
1. **摘抄功能**：添加、编辑、删除、搜索、导入导出
2. **书记功能**：创建、编辑、删除、搜索、导入导出
3. **未保存更改检测**：编辑时切换、新建、切换模式的提示
4. **主题和天气选择**：预设选项、自定义颜色、选择器交互
5. **单篇书记导出**：多种格式（TXT/DOC/MD/PDF）
6. **富文本编辑**：加粗、斜体、删除线、下划线、文字颜色、高亮、组合格式
7. **BubbleMenu交互**：工具栏显示、隐藏、按钮状态同步
8. **列表排序**：按日期倒序、同日期按创建时间倒序
9. **数据持久化**：刷新页面、关闭浏览器后数据保持
10. **性能测试**：大量数据的处理性能

### 测试完成度
✅ **书记模块测试用例编写完成（160个用例）**

所有功能点、边界条件、异常情况、富文本编辑、交互细节、数据一致性和UI/UX均已覆盖。测试用例可用于全面测试书记模块的各项功能。

