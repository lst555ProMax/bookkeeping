# 日记模块测试用例

## 一、速记功能测试

### 1.1 速记添加功能

#### P0 TC-001: 添加速记 - 基本功能  ✅
**测试步骤：**
1. 在速记输入框输入内容："今天天气不错"
2. 按 Ctrl+Enter 保存

**预期结果：**
- 速记成功添加到列表顶部
- 输入框清空
- 显示成功提示

#### P1 TC-002: 添加速记 - 空内容  ✅
**测试步骤：**
1. 输入框为空
2. 按 Ctrl+Enter

**预期结果：**
- 不添加速记
- 无错误提示

#### P1 TC-003: 添加速记 - 仅空格  ✅
**测试步骤：**
1. 输入框只包含空格："   "
2. 按 Ctrl+Enter

**预期结果：**
- 不添加速记（空格会被trim）
- 无错误提示

#### P1 TC-004: 添加速记 - 最大长度  ✅
**测试步骤：**

1. 输入100个字符的内容
2. 按 Ctrl+Enter 保存

**预期结果：**
- 速记成功添加
- 字符计数显示 100/100

#### P1 TC-005: 添加速记 - 超过最大长度  ✅
**测试步骤：**
1. 尝试输入超过100个字符

**预期结果：**
- 输入框限制输入，无法输入超过100字符
- maxLength属性生效

#### P2 TC-006: 添加速记 - 特殊字符  ✅
**测试步骤：**
1. 输入包含特殊字符的内容："测试@#$%^&*()"
2. 按 Ctrl+Enter 保存

**预期结果：**
- 速记成功添加
- 特殊字符正确保存和显示

#### P2 TC-007: 添加速记 - 换行符  ✅
**测试步骤：**
1. 输入包含换行的内容（多行文本）
2. 按 Ctrl+Enter 保存

**预期结果：**

- 速记成功添加
- 换行符正确处理

#### P2 TC-008: 添加速记 - 连续添加多条 ✅
**测试步骤：**
1. 添加第一条速记："第一条"
2. 立即添加第二条速记："第二条"
3. 查看列表

**预期结果：**
- 两条速记都成功添加
- 最新添加的在列表顶部
- 按时间倒序排列

### 1.2 速记编辑功能

#### P0 TC-009: 编辑速记 - 基本功能  ✅
**测试步骤：**
1. 点击一条速记
2. 修改内容
3. 按 Ctrl+Enter 保存

**预期结果：**
- 速记内容更新
- 退出编辑模式
- 输入框清空
- 时间戳更新

#### P2 TC-010: 编辑速记 - 取消编辑（ESC）  ✅
**测试步骤：**
1. 点击一条速记进入编辑模式
2. 修改内容
3. 按 ESC 键

**预期结果：**
- 如果有未保存更改，弹出确认对话框
- 确认后退出编辑模式
- 内容恢复为原内容

#### P2 TC-011: 编辑速记 - 保存空内容  ✅
**测试步骤：**
1. 点击一条速记进入编辑模式
2. 删除所有内容
3. 按 Ctrl+Enter 保存

**预期结果：**
- 提示"速记内容不能为空！"
- 内容恢复为原内容
- 仍在编辑模式

#### P2 TC-012: 编辑速记 - 仅空格  ✅
**测试步骤：**
1. 点击一条速记进入编辑模式
2. 修改为仅空格："   "
3. 按 Ctrl+Enter 保存

**预期结果：**
- 提示"速记内容不能为空！"
- 内容恢复为原内容

#### P2 TC-013: 编辑速记 - 再次点击同一速记  ✅
**测试步骤：**

1. 点击速记A进入编辑模式
2. 再次点击速记A

**预期结果：**
- 如果有未保存更改，弹出确认对话框
- 确认后退出编辑模式（清空面板）

#### P2 TC-014: 编辑速记 - 切换编辑不同速记  ✅
**测试步骤：**
1. 点击速记A进入编辑模式
2. 修改内容但未保存
3. 点击速记B

**预期结果：**
- 弹出确认对话框询问是否继续
- 确认后切换到速记B的编辑模式
- 取消则保持速记A的编辑状态

#### P2 TC-015: 编辑速记 - 字符计数  ✅
**测试步骤：**
1. 点击速记进入编辑模式
2. 查看字符计数显示

**预期结果：**
- 显示当前字符数/100
- 剩余字符少于20时，计数显示警告样式

### 1.3 速记删除功能

#### P1 TC-016: 删除速记 - 基本功能  ✅
**测试步骤：**
1. 点击速记的删除按钮
2. 确认删除

**预期结果：**
- 速记从列表中移除
- 如果正在编辑该速记，编辑面板清空

#### P2 TC-017: 删除速记 - 删除正在编辑的速记  ✅
**测试步骤：**
1. 点击速记A进入编辑模式
2. 点击速记A的删除按钮
3. 确认删除

**预期结果：**

- 速记被删除
- 编辑面板自动清空
- 退出编辑模式

#### P2 TC-018: 删除速记 - 删除所有速记  ✅
**测试步骤：**
1. 有多条速记
2. 点击"删除所有"按钮
3. 确认删除

**预期结果：**
- 所有速记被删除
- 显示空状态提示
- 显示删除成功提示

#### P2 TC-019: 删除速记 - 空列表删除所有  ✅
**测试步骤：**
1. 列表为空
2. 点击"删除所有"按钮

**预期结果：**
- 提示"没有速记可以删除"
- 不执行删除操作

### 1.4 速记搜索功能

#### P1 TC-020: 搜索速记 - 基本功能  ✅
**测试步骤：**
1. 有多条速记
2. 在搜索框输入关键词
3. 查看列表

**预期结果：**
- 只显示包含关键词的速记
- 搜索不区分大小写

#### P2 TC-021: 搜索速记 - 清空搜索  ✅
**测试步骤：**

1. 输入搜索关键词
2. 清空搜索框

**预期结果：**
- 显示所有速记
- 搜索被清除

#### P2 TC-022: 搜索速记 - 无匹配结果  ✅
**测试步骤：**
1. 输入不存在的关键词
2. 查看列表

**预期结果：**
- 列表为空
- 显示空状态（如果有空状态提示）

#### P2 TC-023: 搜索速记 - 部分匹配  ✅
**测试步骤：**
1. 有速记："今天天气不错"
2. 搜索"天气"

**预期结果：**
- 显示匹配的速记
- 高亮或标记匹配部分（如果有）

### 1.5 速记导入导出功能

#### P0 TC-024: 导出速记 - 基本功能  ✅
**测试步骤：**
1. 有多条速记
2. 点击"导出所有"按钮
3. 确认导出

**预期结果：**
- 下载JSON文件
- 文件名格式：diary-quicknotes-YYYY-MM-DD.json
- 文件包含所有速记数据

#### P2 TC-025: 导出速记 - 空列表  ✅
**测试步骤：**

1. 列表为空
2. 点击"导出所有"按钮
3. 确认导出

**预期结果：**
- 导出空数组的JSON文件
- 文件格式正确

#### P1 TC-026: 导入速记 - 基本功能  ✅
**测试步骤：**
1. 准备有效的JSON文件
2. 点击"导入"按钮
3. 选择文件

**预期结果：**
- 速记成功导入
- 显示导入结果提示（新增X条，跳过X条）
- 列表更新

#### P2 TC-027: 导入速记 - 重复数据  ✅
**测试步骤：**
1. 已有速记A（id: "123"）
2. 导入包含相同id的速记A

**预期结果：**
- 重复的速记被跳过
- 显示跳过数量
- 不重复添加

#### P3 TC-028: 导入速记 - 无效文件格式  ✅
**测试步骤：**
1. 选择非JSON文件（如.txt）
2. 尝试导入

**预期结果：**
- 提示"只支持JSON格式文件"
- 不执行导入

#### P3 TC-029: 导入速记 - 文件过大  ✅
**测试步骤：**
1. 准备超过10MB的JSON文件
2. 尝试导入

**预期结果：**
- 提示"文件大小不能超过10MB"
- 不执行导入

#### P3 TC-030: 导入速记 - 无效JSON  ✅
**测试步骤：**
1. 准备格式错误的JSON文件
2. 尝试导入

**预期结果：**
- 提示"文件格式错误，请确保是有效的JSON文件"
- 不执行导入

#### P2 TC-031: 导入速记 - 缺少必要字段  ✅
**测试步骤：**
1. 准备缺少id或content字段的JSON文件
2. 尝试导入

**预期结果：**
- 缺少字段的记录被跳过
- 有效记录正常导入

---

## 二、日记功能测试

### 2.1 日记创建功能

#### P0 TC-032: 创建日记 - 基本功能  ✅
**测试步骤：**

1. 点击"新建日记"按钮
2. 输入内容："今天很开心"
3. 按 Ctrl+Enter 保存

**预期结果：**
- 日记成功保存
- 显示保存成功提示
- 日期默认为今天
- 主题、天气、心情为默认值

#### P1 TC-033: 创建日记 - 空内容不保存  ✅
**测试步骤：**
1. 点击"新建日记"按钮
2. 不输入任何内容
3. 按 Ctrl+Enter 保存

**预期结果：**
- 不创建日记
- 无提示（静默处理）

#### P2 TC-034: 创建日记 - 仅HTML标签无文本
**测试步骤：**
1. 输入仅HTML标签的内容（如：`<p></p>`）
2. 按 Ctrl+Enter 保存

**预期结果：**
- 不创建日记（提取纯文本后为空）
- 或静默处理

#### P1 TC-035: 创建日记 - 选择日期  ✅
**测试步骤：**
1. 点击日期选择器
2. 选择过去的日期（如：2024-10-15）
3. 输入内容并保存

**预期结果：**

- 日记日期为选择的日期
- 日期格式正确  **保存日记的时候，应该让对应的日记滚动到视图中**  **另外，是不是要加一个是否有新内容的提示符号**，**速记也是**

#### P1 TC-036: 创建日记 - 日期最小值限制  ✅
**测试步骤：**

1. 尝试选择2024-01-01之前的日期

**预期结果：**
- 日期选择器限制最小日期为2024-01-01
- 无法选择更早的日期

#### P2 TC-037: 创建日记 - 同一天多篇日记  ✅
**测试步骤：**
1. 创建第一篇日记（日期：2024-10-15）
2. 再次创建日记，选择相同日期
3. 输入不同内容并保存

**预期结果：**
- 两篇日记都成功保存
- 在列表中按创建时间倒序显示
- 同一天的多篇日记都能正常显示   **同一天的日记不要展示时间了，而是用#1 这样的数字代替**

### 2.2 日记编辑功能

#### P0 TC-038: 编辑日记 - 基本功能  ✅
**测试步骤：**
1. 点击列表中的一篇日记
2. 修改内容
3. 按 Ctrl+Enter 保存

**预期结果：**

- 日记内容更新
- 显示保存成功提示
- updatedAt时间戳更新

#### P1 TC-039: 编辑日记 - 修改日期  ✅
**测试步骤：**
1. 打开一篇日记
2. 修改日期为其他日期
3. 保存

**预期结果：**
- 日记日期更新为新日期
- 日记在列表中按新日期排序

#### P1 TC-040: 编辑日记 - 清空内容  ✅
**测试步骤：**
1. 打开一篇已存在的日记
2. 删除所有内容
3. 按 Ctrl+Enter 保存

**预期结果：**
- 日记被静默删除（不提示确认）
- 从列表中移除

#### P1 TC-041: 编辑日记 - 未保存更改检测
**测试步骤：**
1. 打开一篇日记
2. 修改内容但未保存
3. 点击另一篇日记

**预期结果：**
- 弹出确认对话框："当前有未保存的日记，是否继续当前操作？"
- 确认后切换到新日记
- 取消则保持当前日记

#### P1 TC-042: 编辑日记 - 未保存更改时新建  ✅
**测试步骤：**
1. 打开一篇日记
2. 修改内容但未保存
3. 点击"新建日记"按钮

**预期结果：**
- 弹出确认对话框
- 确认后创建新日记
- 取消则保持当前日记

#### P1 TC-043: 编辑日记 - 未保存更改时切换模式  ✅
**测试步骤：**
1. 打开一篇日记
2. 修改内容但未保存
3. 点击模式切换器（切换到其他模块）

**预期结果：**
- 弹出确认对话框
- 确认后切换模式
- 取消则保持当前模式

#### P2 TC-044: 编辑日记 - 点击当前日记  ✅
**测试步骤：**
1. 打开一篇日记A
2. 再次点击列表中的日记A

**预期结果：**
- 不进行任何操作（已打开的不重复加载）

### 2.3 日记删除功能

#### P0 TC-045: 删除日记 - 基本功能  ✅
**测试步骤：**
1. 点击日记的删除按钮
2. 确认删除

**预期结果：**
- 日记从列表中移除
- 显示删除成功提示
- 如果删除的是当前显示的日记，自动加载其他日记或显示新建页

#### P1 TC-046: 删除日记 - 删除当前显示的日记  ✅
**测试步骤：**
1. 打开一篇日记A
2. 点击日记A的删除按钮
3. 确认删除

**预期结果：**
- 日记被删除
- 如果列表中有其他日记，自动加载第一篇
- 如果列表为空，显示新建页

#### P1 TC-047: 删除日记 - 删除所有日记  ✅
**测试步骤：**
1. 有多篇日记
2. 点击"删除所有"按钮
3. 确认删除

**预期结果：**
- 所有日记被删除
- 显示删除成功提示
- 显示新建页

#### P2 TC-048: 删除日记 - 空列表删除所有  ✅
**测试步骤：**
1. 列表为空
2. 点击"删除所有"按钮

**预期结果：**
- 提示"没有日记可以删除"
- 不执行删除操作

### 2.4 日记搜索功能

#### P1 TC-049: 搜索日记 - 基本功能  ✅
**测试步骤：**
1. 有多篇日记
2. 在搜索框输入关键词
3. 查看列表

**预期结果：**
- 只显示内容包含关键词的日记
- 搜索不区分大小写 

#### P2 TC-050: 搜索日记 - 清空搜索  ✅
**测试步骤：**
1. 输入搜索关键词
2. 清空搜索框

**预期结果：**
- 显示所有日记
- 搜索被清除

#### P2 TC-051: 搜索日记 - 无匹配结果  ✅
**测试步骤：**
1. 输入不存在的关键词
2. 查看列表

**预期结果：**
- 列表为空
- 显示空状态提示

#### P2 TC-052: 搜索日记 - HTML标签内容搜索
**测试步骤：**
1. 有包含HTML格式的日记
2. 搜索纯文本关键词

**预期结果：**
- 能搜索到包含该文本的日记（提取纯文本后搜索）

### 2.5 日记导入导出功能

#### P0 TC-053: 导出日记 - 基本功能  ✅
**测试步骤：**

1. 有多篇日记
2. 点击"导出所有"按钮
3. 确认导出

**预期结果：**
- 下载JSON文件
- 文件名格式：diary-entries-YYYY-MM-DD.json
- 文件包含所有日记数据  **有筛选条件的时候导出没有做过滤**

#### P2 TC-054: 导出日记 - 空列表  ✅
**测试步骤：**
1. 列表为空
2. 点击"导出所有"按钮
3. 确认导出

**预期结果：**
- 导出空数组的JSON文件
- 文件格式正确

#### P0 TC-055: 导入日记 - 基本功能  ✅
**测试步骤：**
1. 准备有效的JSON文件
2. 点击"导入"按钮
3. 选择文件

**预期结果：**
- 日记成功导入
- 显示导入结果提示（新增X篇，跳过X篇）
- 列表更新

#### P2 TC-056: 导入日记 - 重复日期  ✅
**测试步骤：**
1. 已有日期为2024-10-15的日记
2. 导入相同日期的日记

**预期结果：**
- 重复日期的日记被跳过
- 显示跳过数量
- 不重复添加

#### P3 TC-057: 导入日记 - 无效文件格式  ✅
**测试步骤：**
1. 选择非JSON文件（如.txt）
2. 尝试导入

**预期结果：**
- 提示"只支持JSON格式文件"
- 不执行导入

#### P3 TC-058: 导入日记 - 文件过大  ✅
**测试步骤：**
1. 准备超过10MB的JSON文件
2. 尝试导入

**预期结果：**
- 提示"文件大小不能超过10MB"
- 不执行导入

#### P3 TC-059: 导入日记 - 无效JSON  ✅
**测试步骤：**
1. 准备格式错误的JSON文件
2. 尝试导入

**预期结果：**
- 提示"文件格式错误，请确保是有效的JSON文件"
- 不执行导入

#### P2 TC-060: 导入日记 - 缺少必要字段  ✅
**测试步骤：**
1. 准备缺少id或date字段的JSON文件
2. 尝试导入

**预期结果：**
- 缺少字段的记录被跳过
- 有效记录正常导入

### 2.6 单篇日记导出功能

#### P1 TC-061: 导出单篇日记 - TXT格式  ✅
**测试步骤：**
1. 打开一篇日记
2. 点击导出按钮
3. 选择TXT格式

**预期结果：**
- 下载TXT文件
- 文件名格式：日记_YYYY.MM.DD.txt  **格式不对，要加上 1这样的索引**
- 文件包含日期、时间、天气、心情和纯文本内容  **放不下的时候能不能展示到上面去**

#### P1 TC-062: 导出单篇日记 - DOC格式  ✅
**测试步骤：**
1. 打开一篇日记
2. 点击导出按钮
3. 选择DOC格式

**预期结果：**

- 下载DOC文件
- 文件名格式：日记_YYYY.MM.DD.doc  **日记名同样不对**
- 文件保留HTML格式（加粗、颜色等）

#### P1 TC-063: 导出单篇日记 - MD格式  ✅
**测试步骤：**
1. 打开一篇日记
2. 点击导出按钮
3. 选择MD格式

**预期结果：**

- 下载MD文件
- 文件名格式：日记_YYYY.MM.DD.md  **文件名同样不对**
- 文件包含Markdown格式的内容

#### P2 TC-064: 导出单篇日记 - PDF格式  ✅
**测试步骤：**
1. 打开一篇日记
2. 点击导出按钮
3. 选择PDF格式

**预期结果：**
- 提示使用浏览器"打印-另存为PDF"功能  **文件名称不对，另外，日记的pdf导出功能怎么没了**
- 或显示相应提示信息

### 2.7 主题选择功能

#### P1 TC-065: 选择预设主题 - 基本功能
**测试步骤：**
1. 打开主题选择器
2. 选择一个预设主题（如：米白）

**预期结果：**
- 日记背景色更新为选择的主题色
- 主题选择器关闭

#### P2 TC-066: 选择预设主题 - 所有36种预设
**测试步骤：**
1. 依次选择所有36种预设主题

**预期结果：**
- 每种主题都能正常应用
- 背景色正确显示

#### P1 TC-067: 自定义主题颜色 - 基本功能
**测试步骤：**
1. 打开主题选择器
2. 使用颜色选择器选择自定义颜色
3. 点击"应用自定义颜色"

**预期结果：**
- 日记背景色更新为自定义颜色
- 主题选择器关闭

#### P2 TC-068: 自定义主题颜色 - 各种颜色值
**测试步骤：**
1. 选择不同的颜色值（如：#FF0000、#00FF00、#0000FF等）
2. 应用自定义颜色

**预期结果：**
- 所有颜色值都能正常应用
- 背景色正确显示

#### P2 TC-069: 主题选择器 - 鼠标悬停延迟关闭
**测试步骤：**
1. 打开主题选择器
2. 鼠标移出选择器
3. 观察关闭时间

**预期结果：**
- 选择器延迟350ms后关闭
- 如果鼠标重新移入，取消关闭

#### P2 TC-070: 主题选择器 - 切换其他选择器
**测试步骤：**
1. 打开主题选择器
2. 打开天气选择器

**预期结果：**
- 主题选择器自动关闭
- 天气选择器打开

### 2.8 天气选择功能

#### P1 TC-071: 选择天气 - 基本功能
**测试步骤：**
1. 打开天气选择器
2. 选择一个天气（如：晴天）

**预期结果：**
- 天气更新为选择的天气
- 天气图标显示在头部
- 选择器关闭

#### P2 TC-072: 选择天气 - 所有18种天气
**测试步骤：**
1. 依次选择所有18种天气选项

**预期结果：**
- 每种天气都能正常选择
- 图标正确显示

#### P2 TC-073: 天气选择器 - 鼠标悬停延迟关闭
**测试步骤：**
1. 打开天气选择器
2. 鼠标移出选择器
3. 观察关闭时间

**预期结果：**
- 选择器延迟350ms后关闭
- 如果鼠标重新移入，取消关闭

#### P2 TC-074: 天气显示 - 列表中的天气图标
**测试步骤：**
1. 创建一篇日记，选择天气为"晴天"
2. 查看列表中的日记项

**预期结果：**
- 日记项显示对应的天气图标（☀️）

### 2.9 心情选择功能

#### P1 TC-075: 选择心情 - 基本功能
**测试步骤：**
1. 打开心情选择器
2. 选择一个心情（如：开心）

**预期结果：**
- 心情更新为选择的心情
- 心情图标显示在头部
- 选择器关闭

#### P2 TC-076: 选择心情 - 所有35种心情
**测试步骤：**
1. 依次选择所有35种心情选项

**预期结果：**
- 每种心情都能正常选择
- 图标正确显示

#### P2 TC-077: 心情选择器 - 鼠标悬停延迟关闭
**测试步骤：**
1. 打开心情选择器
2. 鼠标移出选择器
3. 观察关闭时间

**预期结果：**
- 选择器延迟350ms后关闭
- 如果鼠标重新移入，取消关闭

#### P2 TC-078: 心情显示 - 列表中的心情图标
**测试步骤：**
1. 创建一篇日记，选择心情为"开心"
2. 查看列表中的日记项

**预期结果：**
- 日记项显示对应的心情图标（😊）

### 2.10 字体选择功能

#### P1 TC-079: 选择字体 - 基本功能
**测试步骤：**
1. 打开字体选择器
2. 选择一个字体（如：楷体）

**预期结果：**
- 日记内容字体更新为选择的字体
- 字体选择器关闭

#### P2 TC-080: 选择字体 - 中文字体
**测试步骤：**
1. 依次选择各种中文字体（楷体、宋体、黑体等）

**预期结果：**
- 每种字体都能正常应用
- 日记内容字体正确显示

#### P2 TC-081: 选择字体 - 英文字体
**测试步骤：**
1. 依次选择各种英文字体（Arial、Times New Roman等）

**预期结果：**
- 每种字体都能正常应用
- 日记内容字体正确显示

#### P2 TC-082: 选择字体 - 等宽字体
**测试步骤：**
1. 选择等宽字体（如：Consolas）

**预期结果：**
- 字体正常应用
- 等宽效果正确显示

#### P2 TC-083: 字体选择器 - 鼠标悬停延迟关闭
**测试步骤：**
1. 打开字体选择器
2. 鼠标移出选择器
3. 观察关闭时间

**预期结果：**
- 选择器延迟350ms后关闭
- 如果鼠标重新移入，取消关闭

#### P2 TC-084: 字体显示 - 列表中的字体
**测试步骤：**
1. 创建一篇日记，选择字体为"楷体"
2. 查看列表中的日记预览

**预期结果：**
- 预览文本使用选择的字体显示

### 2.11 富文本编辑功能

#### P1 TC-085: 加粗文本 - 基本功能
**测试步骤：**
1. 选中一段文本
2. 点击加粗按钮（或使用快捷键）

**预期结果：**
- 文本变为加粗
- 按钮显示激活状态

#### P1 TC-086: 斜体文本 - 基本功能
**测试步骤：**
1. 选中一段文本
2. 点击斜体按钮

**预期结果：**
- 文本变为斜体
- 按钮显示激活状态

#### P2 TC-087: 删除线文本 - 基本功能
**测试步骤：**
1. 选中一段文本
2. 点击删除线按钮

**预期结果：**
- 文本显示删除线
- 按钮显示激活状态

#### P1 TC-088: 下划线文本 - 基本功能
**测试步骤：**
1. 选中一段文本
2. 点击下划线按钮（或使用快捷键）

**预期结果：**
- 文本显示下划线
- 按钮显示激活状态

#### P1 TC-089: 文字颜色 - 基本功能
**测试步骤：**
1. 选中一段文本
2. 在BubbleMenu中选择文字颜色（如：红色 #FF6666）

**预期结果：**
- 文本颜色变为选择的颜色
- 颜色按钮显示激活状态

#### P2 TC-090: 文字颜色 - 所有8种颜色
**测试步骤：**
1. 依次选择所有8种文字颜色
2. 观察文本颜色变化

**预期结果：**
- 每种颜色都能正常应用
- 文本颜色正确显示

#### P1 TC-091: 高亮文本 - 基本功能
**测试步骤：**
1. 选中一段文本
2. 在BubbleMenu中选择高亮颜色（如：柔和黄 #FFFFBA）

**预期结果：**
- 文本背景显示高亮颜色
- 高亮按钮显示激活状态

#### P2 TC-092: 高亮文本 - 取消高亮
**测试步骤：**
1. 选中已高亮的文本
2. 选择"无高亮"（transparent）

**预期结果：**
- 文本高亮被移除
- 恢复为无高亮状态

#### P2 TC-093: 高亮文本 - 所有8种高亮颜色
**测试步骤：**
1. 依次选择所有8种高亮颜色（包括无高亮）
2. 观察高亮效果

**预期结果：**
- 每种高亮颜色都能正常应用
- 高亮效果正确显示

#### P2 TC-094: 组合格式 - 加粗+斜体
**测试步骤：**
1. 选中一段文本
2. 先点击加粗，再点击斜体

**预期结果：**
- 文本同时显示加粗和斜体
- 两个按钮都显示激活状态

#### P2 TC-095: 组合格式 - 加粗+下划线+颜色
**测试步骤：**
1. 选中一段文本
2. 应用加粗、下划线和文字颜色

**预期结果：**
- 文本同时具有加粗、下划线和颜色
- 所有相关按钮显示激活状态

#### P2 TC-096: 组合格式 - 高亮+加粗+颜色
**测试步骤：**
1. 选中一段文本
2. 应用高亮、加粗和文字颜色

**预期结果：**
- 文本同时具有高亮背景、加粗和文字颜色
- 所有相关按钮显示激活状态

#### P2 TC-097: 格式切换 - 取消加粗
**测试步骤：**
1. 选中已加粗的文本
2. 再次点击加粗按钮

**预期结果：**
- 文本取消加粗
- 按钮取消激活状态

#### P2 TC-098: 格式切换 - 取消斜体
**测试步骤：**
1. 选中已斜体的文本
2. 再次点击斜体按钮

**预期结果：**
- 文本取消斜体
- 按钮取消激活状态

### 2.12 BubbleMenu工具栏交互

#### P1 TC-099: BubbleMenu显示 - 选中文本时
**测试步骤：**
1. 在编辑器中输入文本
2. 选中一段文本

**预期结果：**
- BubbleMenu工具栏出现在选中文本附近
- 显示格式按钮、颜色选择等

#### P2 TC-100: BubbleMenu隐藏 - 未选中文本时
**测试步骤：**
1. 选中文本（BubbleMenu显示）
2. 点击编辑器空白处

**预期结果：**
- BubbleMenu自动隐藏

#### P2 TC-101: BubbleMenu - 按钮状态同步
**测试步骤：**
1. 选中已加粗的文本
2. 查看BubbleMenu中的加粗按钮

**预期结果：**
- 加粗按钮显示激活状态（is-active类）

#### P2 TC-102: BubbleMenu - 多行按钮布局
**测试步骤：**
1. 选中文本，显示BubbleMenu
2. 观察工具栏布局

**预期结果：**
- 第一行：格式按钮（加粗、删除线、斜体、下划线）
- 第二行：文字颜色（8种颜色）
- 第三行：高亮颜色（8种颜色）

#### P2 TC-103: BubbleMenu - 点击按钮不失去焦点
**测试步骤：**
1. 选中文本
2. 点击BubbleMenu中的格式按钮

**预期结果：**
- 文本保持选中状态
- 可以继续应用其他格式

### 2.13 日期选择器功能

#### P2 TC-104: 日期选择器 - 选择过去日期
**测试步骤：**
1. 打开日期选择器
2. 选择过去的日期（如：2024-10-15）

**预期结果：**
- 日期正确更新
- 日记日期显示为选择的日期

#### P2 TC-105: 日期选择器 - 选择今天
**测试步骤：**
1. 打开日期选择器
2. 选择今天的日期

**预期结果：**
- 日期更新为今天
- 日记日期显示为今天

#### P2 TC-106: 日期选择器 - 最小日期限制
**测试步骤：**
1. 打开日期选择器
2. 尝试选择2024-01-01之前的日期

**预期结果：**
- 日期选择器限制最小日期为2024-01-01
- 无法选择更早的日期

#### P2 TC-107: 日期选择器 - 修改日期后保存
**测试步骤：**
1. 打开一篇日记
2. 修改日期为其他日期
3. 保存

**预期结果：**
- 日记日期更新为新日期
- 日记在列表中按新日期排序

#### P2 TC-108: 日期选择器 - 同一天多篇日记
**测试步骤：**
1. 创建第一篇日记（日期：2024-10-15）
2. 再次创建日记，选择相同日期
3. 保存

**预期结果：**
- 两篇日记都成功保存
- 在列表中按创建时间倒序显示

### 2.14 列表显示和排序

#### P1 TC-109: 列表排序 - 按日期倒序
**测试步骤：**
1. 创建多篇不同日期的日记
2. 查看列表

**预期结果：**
- 日记按日期倒序排列（最新的在前）
- 日期较新的日记显示在顶部

#### P2 TC-110: 列表排序 - 同日期按创建时间倒序
**测试步骤：**
1. 在同一天创建多篇日记
2. 查看列表

**预期结果：**
- 同一天的日记按创建时间倒序排列
- 最后创建的显示在最前

#### P1 TC-111: 列表显示 - 日期格式
**测试步骤：**
1. 创建一篇日记
2. 查看列表中的日期显示

**预期结果：**
- 日期格式为：yyyy.mm.dd（如：2024.10.15）
- 时间格式为：HH:mm

#### P1 TC-112: 列表显示 - 天气图标
**测试步骤：**
1. 创建一篇日记，选择天气为"晴天"
2. 查看列表

**预期结果：**
- 日记项显示对应的天气图标（☀️）

#### P1 TC-113: 列表显示 - 心情图标
**测试步骤：**
1. 创建一篇日记，选择心情为"开心"
2. 查看列表

**预期结果：**
- 日记项显示对应的心情图标（😊）

#### P2 TC-114: 列表显示 - 主题背景色
**测试步骤：**
1. 创建一篇日记，选择主题颜色
2. 查看列表

**预期结果：**
- 日记项背景色显示为主题颜色

#### P1 TC-115: 列表显示 - 内容预览
**测试步骤：**
1. 创建一篇长内容的日记
2. 查看列表

**预期结果：**
- 显示内容预览（前100字符）
- 超过100字符显示"..."

#### P2 TC-116: 列表显示 - 字体预览
**测试步骤：**
1. 创建一篇日记，选择字体为"楷体"
2. 查看列表预览

**预期结果：**
- 预览文本使用选择的字体显示

#### P1 TC-117: 列表显示 - 当前日记高亮
**测试步骤：**
1. 打开一篇日记
2. 查看列表

**预期结果：**
- 当前打开的日记项显示高亮（diary-item--active类）

#### P0 TC-118: 列表显示 - 空状态
**测试步骤：**
1. 没有任何日记时查看列表

**预期结果：**
- 显示空状态提示："还没有日记哦"
- 显示引导文字："在中间写下你的第一篇日记吧！"

### 2.15 单篇日记导出功能深度测试

#### P2 TC-119: 导出TXT - 包含格式文本
**测试步骤：**
1. 创建包含加粗、斜体等格式的日记
2. 导出为TXT格式

**预期结果：**
- 导出为纯文本（格式被移除）
- 文件包含日期、时间、天气、心情和纯文本内容

#### P2 TC-120: 导出DOC - 保留HTML格式
**测试步骤：**
1. 创建包含加粗、颜色等格式的日记
2. 导出为DOC格式

**预期结果：**
- 导出文件保留HTML格式
- 加粗、颜色等格式在DOC中正确显示

#### P2 TC-121: 导出MD - Markdown格式
**测试步骤：**
1. 创建一篇日记
2. 导出为MD格式

**预期结果：**
- 导出为Markdown格式
- 文件包含日期、时间、天气、心情和内容

#### P2 TC-122: 导出菜单 - 点击外部关闭
**测试步骤：**
1. 点击日记项的导出按钮
2. 点击菜单外部区域

**预期结果：**
- 导出菜单自动关闭

#### P2 TC-123: 导出菜单 - 点击其他日记项关闭
**测试步骤：**
1. 打开日记A的导出菜单
2. 点击日记B

**预期结果：**
- 导出菜单关闭
- 日记B被加载

### 2.16 边界条件和异常情况

#### P2 TC-124: 大量速记数据 - 1000条
**测试步骤：**
1. 添加1000条速记
2. 测试列表渲染和搜索性能

**预期结果：**
- 列表正常渲染
- 搜索响应时间可接受（<1秒）
- 滚动流畅

#### P2 TC-125: 大量日记数据 - 500篇
**测试步骤：**
1. 创建500篇日记
2. 测试列表渲染和搜索性能

**预期结果：**
- 列表正常渲染
- 搜索响应时间可接受（<2秒）
- 滚动流畅

#### P2 TC-126: 超长速记内容 - 100字符
**测试步骤：**
1. 输入100字符的速记内容

**预期结果：**
- 输入框限制为100字符
- 字符计数显示 100/100

#### P2 TC-127: 超长日记内容 - 10000字符
**测试步骤：**
1. 创建包含10000字符的日记
2. 保存并查看

**预期结果：**
- 日记正常保存
- 列表预览显示前100字符

#### P2 TC-128: 并发操作 - 快速连续添加速记
**测试步骤：**
1. 快速连续添加多条速记（每秒3条）
2. 观察数据一致性

**预期结果：**
- 所有速记都成功添加
- 数据一致性保持
- 无数据丢失

#### P2 TC-129: 并发操作 - 快速连续保存日记
**测试步骤：**
1. 快速连续保存同一篇日记（每秒2次）
2. 观察数据一致性

**预期结果：**
- 最后一次保存生效
- 数据正确更新

#### P2 TC-130: 特殊字符处理 - HTML标签
**测试步骤：**
1. 在日记中输入HTML标签：`<script>alert('test')</script>`
2. 保存并查看

**预期结果：**
- HTML标签被正确转义或处理
- 不会执行脚本代码

#### P2 TC-131: 特殊字符处理 - Emoji表情
**测试步骤：**
1. 在日记中输入Emoji：😊🎉🎈
2. 保存并查看

**预期结果：**
- Emoji正确保存和显示

#### P0 TC-132: 数据持久化 - 刷新页面
**测试步骤：**
1. 创建多篇日记和速记
2. 刷新浏览器页面

**预期结果：**
- 所有数据仍然存在
- 日记和速记正常显示

#### P0 TC-133: 数据持久化 - 关闭浏览器
**测试步骤：**
1. 创建多篇日记和速记
2. 完全关闭浏览器
3. 重新打开

**预期结果：**
- 所有数据仍然存在
- 数据完整无丢失

#### P1 TC-134: 导入导出数据完整性
**测试步骤：**
1. 导出所有数据
2. 清空所有数据
3. 导入刚才导出的文件

**预期结果：**
- 所有数据恢复
- 日记和速记数量一致
- 内容、主题、天气、心情等字段完整

### 2.17 UI/UX测试

#### P2 TC-135: 响应式布局 - 不同屏幕尺寸
**测试步骤：**
1. 在不同屏幕尺寸下查看日记页面

**预期结果：**
- 布局自适应
- 内容正常显示
- 无横向滚动条

#### P2 TC-136: 操作反馈 - 保存成功提示
**测试步骤：**
1. 保存一篇日记

**预期结果：**
- 显示"保存成功"提示
- 提示在2秒后自动消失

#### P2 TC-137: 操作反馈 - 删除确认对话框
**测试步骤：**
1. 点击删除日记按钮

**预期结果：**
- 显示确认对话框
- 明确提示删除操作不可撤销

#### P2 TC-138: 加载状态 - 导入数据时
**测试步骤：**
1. 选择大文件进行导入

**预期结果：**
- 显示加载状态
- 按钮显示"导入中..."等状态

#### P0 TC-139: 空状态提示 - 无速记
**测试步骤：**
1. 没有任何速记时查看速记列表

**预期结果：**
- 显示友好的空状态提示
- 有引导性文字

#### P0 TC-140: 空状态提示 - 无日记
**测试步骤：**
1. 没有任何日记时查看日记列表

**预期结果：**
- 显示友好的空状态提示
- 有引导性文字

---

## 测试总结

### 测试覆盖范围（全部137个用例）
- ✅ 速记添加功能（8个用例）
- ✅ 速记编辑功能（7个用例）
- ✅ 速记删除功能（4个用例）
- ✅ 速记搜索功能（4个用例）
- ✅ 速记导入导出功能（8个用例）
- ✅ 日记创建功能（6个用例）
- ✅ 日记编辑功能（7个用例）
- ✅ 日记删除功能（4个用例）
- ✅ 日记搜索功能（4个用例）
- ✅ 日记导入导出功能（8个用例）
- ✅ 单篇日记导出功能（5个用例）
- ✅ 主题选择功能（6个用例）
- ✅ 天气选择功能（4个用例）
- ✅ 心情选择功能（4个用例）
- ✅ 字体选择功能（6个用例）
- ✅ 富文本编辑功能（12个用例）- 加粗、斜体、删除线、下划线、文字颜色、高亮、组合格式
- ✅ BubbleMenu工具栏交互（5个用例）
- ✅ 日期选择器功能（5个用例）
- ✅ 列表显示和排序（10个用例）
- ✅ 边界条件和异常情况（11个用例）
- ✅ UI/UX测试（6个用例）

**总计：137个测试用例**

### 重点测试项
1. **速记功能**：添加、编辑、删除、搜索、导入导出
2. **日记功能**：创建、编辑、删除、搜索、导入导出
3. **未保存更改检测**：编辑时切换、新建、切换模式的提示
4. **主题和天气选择**：预设选项、自定义颜色、选择器交互
5. **单篇日记导出**：多种格式（TXT/DOC/MD/PDF）
6. **富文本编辑**：加粗、斜体、删除线、下划线、文字颜色、高亮、组合格式
7. **BubbleMenu交互**：工具栏显示、隐藏、按钮状态同步
8. **列表排序**：按日期倒序、同日期按创建时间倒序
9. **数据持久化**：刷新页面、关闭浏览器后数据保持
10. **性能测试**：大量数据的处理性能

### 测试完成度
✅ **日记模块测试用例编写完成（137个用例）**

所有功能点、边界条件、异常情况、富文本编辑、交互细节、数据一致性和UI/UX均已覆盖。测试用例可用于全面测试日记模块的各项功能。

