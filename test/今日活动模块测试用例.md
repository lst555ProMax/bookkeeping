# 今日活动模块测试用例

## 一、抽卡功能测试

### 1.1 抽卡基本功能

#### TC-001: 抽卡 - 基本功能
**测试步骤：**
1. 打开今日活动模块
2. 点击"🎴 今日活动"按钮
3. 在模态框中点击"点击抽卡"按钮

**预期结果：**
- 显示抽卡动画（"抽卡中..."）
- 2秒后显示抽卡结果
- 显示彩带特效
- 3秒后自动关闭模态框
- 主界面显示今日任务卡片

#### TC-002: 抽卡 - 已抽过卡的情况
**测试步骤：**
1. 今天已经抽过卡
2. 点击"🎴 今日活动"按钮
3. 在模态框中尝试再次抽卡

**预期结果：**
- 模态框显示"今天已经抽过卡了，明天再来吧！"
- 不显示抽卡按钮
- 或点击抽卡按钮时显示提示："今天已经抽过卡了！"

#### TC-003: 抽卡 - 查看已抽卡片
**测试步骤：**
1. 今天已经抽过卡
2. 点击主界面显示的今日任务卡片

**预期结果：**
- 打开模态框
- 显示已抽到的卡片信息
- 显示卡片分类和类型

#### TC-004: 抽卡 - 抽到自定义类型
**测试步骤：**
1. 抽卡抽到自定义类型
2. 查看模态框显示

**预期结果：**
- 显示自定义输入框
- 提示"请输入自定义内容："
- 显示确认按钮
- 不自动关闭模态框（需要输入内容）

#### TC-005: 抽卡 - 自定义内容输入
**测试步骤：**
1. 抽到自定义类型卡片
2. 在输入框输入内容："今晚看电影"
3. 点击确认按钮

**预期结果：**
- 自定义内容保存成功
- 显示彩带特效
- 2秒后自动关闭模态框
- 主界面显示自定义内容

#### TC-006: 抽卡 - 自定义内容为空
**测试步骤：**
1. 抽到自定义类型卡片
2. 不输入内容，直接点击确认

**预期结果：**
- 显示错误提示："请输入自定义内容！"
- 模态框不关闭
- 可以继续输入

#### TC-007: 抽卡 - 自定义内容仅空格
**测试步骤：**
1. 抽到自定义类型卡片
2. 输入仅包含空格的内容
3. 点击确认

**预期结果：**
- 显示错误提示："请输入自定义内容！"
- 空格被trim处理

#### TC-008: 抽卡 - 自定义内容超过20字符
**测试步骤：**
1. 抽到自定义类型卡片
2. 输入超过20个字符的内容

**预期结果：**
- 显示错误提示："自定义内容不能超过20个字符"
- 内容未保存

#### TC-009: 抽卡 - 自定义内容最大长度
**测试步骤：**
1. 抽到自定义类型卡片
2. 输入20个字符的内容
3. 点击确认

**预期结果：**
- 内容成功保存
- 显示正确

#### TC-010: 抽卡 - 自定义内容按Enter确认
**测试步骤：**
1. 抽到自定义类型卡片
2. 输入内容
3. 按Enter键

**预期结果：**
- 等同于点击确认按钮
- 内容保存成功

#### TC-011: 抽卡 - 概率说明显示
**测试步骤：**
1. 打开抽卡模态框
2. 查看概率说明区域

**预期结果：**
- 显示所有分类的概率
- 显示每个分类下各项活动的概率
- 概率以百分比形式显示

### 1.2 抽卡结果显示

#### TC-012: 抽卡结果 - 卡片显示
**测试步骤：**
1. 抽卡后查看结果

**预期结果：**
- 显示卡片分类（如"研究向"）
- 显示卡片类型（如"商业分析"）
- 卡片样式正确

#### TC-013: 抽卡结果 - 自定义卡片显示
**测试步骤：**
1. 抽到自定义类型并输入内容
2. 查看主界面显示

**预期结果：**
- 显示"自定义"分类
- 显示输入的自定义内容
- 不显示"自定义"类型标签

#### TC-014: 抽卡结果 - 点击卡片查看详情
**测试步骤：**
1. 已抽过卡
2. 点击主界面的今日任务卡片

**预期结果：**
- 打开模态框
- 显示完整的卡片信息
- 显示概率说明

### 1.3 重置功能

#### TC-015: 重置抽卡 - 基本功能（开发环境）
**测试步骤：**
1. 在开发环境下
2. 已抽过卡
3. 点击重置按钮（🔄）
4. 确认重置

**预期结果：**
- 显示确认对话框
- 确认后抽卡记录被清除
- 主界面恢复为"🎴 今日活动"按钮
- 显示成功提示："已重置抽卡记录"

#### TC-016: 重置抽卡 - 取消重置
**测试步骤：**
1. 点击重置按钮
2. 在确认对话框中点击取消

**预期结果：**
- 抽卡记录未被清除
- 主界面保持不变

#### TC-017: 重置抽卡 - 无记录时重置
**测试步骤：**
1. 今天还没有抽卡
2. 尝试重置（如果按钮存在）

**预期结果：**
- 显示提示："今天还没有抽卡记录"
- 或重置按钮不显示

#### TC-018: 重置按钮 - 生产环境不显示
**测试步骤：**
1. 在生产环境下
2. 已抽过卡

**预期结果：**
- 重置按钮不显示
- 只有开发环境显示重置按钮

## 二、活动配置管理功能

### 2.1 配置管理器打开和关闭

#### TC-019: 打开配置管理器 - 基本功能
**测试步骤：**
1. 打开抽卡模态框
2. 点击设置图标（⚙️）

**预期结果：**
- 打开活动配置管理器
- 显示配置管理界面

#### TC-020: 关闭配置管理器
**测试步骤：**
1. 打开配置管理器
2. 点击关闭按钮或外部区域

**预期结果：**
- 配置管理器关闭
- 返回抽卡模态框

### 2.2 分类管理功能

#### TC-021: 添加分类 - 基本功能
**测试步骤：**
1. 打开配置管理器
2. 点击"添加分类"按钮

**预期结果：**
- 新增一个分类
- 默认名称为"新分类"（如果已存在则为"新分类1"等）
- 分类类型为自定义
- 默认概率为0

#### TC-022: 添加分类 - 名称重复处理
**测试步骤：**
1. 已有"新分类"
2. 再次添加分类

**预期结果：**
- 新分类名称为"新分类1"
- 如果"新分类1"也存在，则为"新分类2"，以此类推

#### TC-023: 编辑分类名称 - 基本功能
**测试步骤：**
1. 点击分类名称进入编辑模式
2. 修改名称
3. 点击保存或按Enter

**预期结果：**
- 分类名称更新成功
- 退出编辑模式

#### TC-024: 编辑分类名称 - 取消编辑
**测试步骤：**
1. 点击分类名称进入编辑模式
2. 修改名称
3. 按ESC键

**预期结果：**
- 名称恢复为原始值
- 退出编辑模式

#### TC-025: 编辑分类名称 - 空名称
**测试步骤：**
1. 编辑分类名称
2. 删除所有内容
3. 尝试保存

**预期结果：**
- 显示错误提示："分类名称不能为空"
- 或不允许保存空名称

#### TC-026: 编辑分类名称 - 名称长度限制
**测试步骤：**
1. 编辑分类名称
2. 输入超过20个字符的名称

**预期结果：**
- 显示错误提示："分类名称不能超过20个字符"
- 或输入框限制输入

#### TC-027: 编辑分类概率 - 基本功能
**测试步骤：**
1. 点击分类概率进入编辑模式
2. 修改概率值
3. 保存

**预期结果：**
- 概率更新成功
- 自定义分类的概率自动调整

#### TC-028: 编辑分类概率 - 概率总和超过1
**测试步骤：**
1. 修改多个分类的概率
2. 使非自定义分类的概率总和超过1

**预期结果：**
- 显示错误提示："所有分类的概率总和不能超过100%"
- 或自定义分类概率变为负数（显示警告）

#### TC-029: 删除分类 - 基本功能
**测试步骤：**
1. 点击分类的删除按钮
2. 确认删除

**预期结果：**
- 分类被删除
- 该分类下的所有活动项也被删除
- 自定义分类的概率自动调整

#### TC-030: 删除分类 - 取消删除
**测试步骤：**
1. 点击删除按钮
2. 取消删除

**预期结果：**
- 分类未被删除
- 列表保持不变

#### TC-031: 删除分类 - 删除自定义分类
**测试步骤：**
1. 尝试删除"自定义"分类

**预期结果：**
- 不允许删除（如果有限制）
- 或显示错误提示

### 2.3 活动项管理功能

#### TC-032: 添加活动项 - 基本功能
**测试步骤：**
1. 选择一个分类
2. 点击"添加活动"按钮
3. 输入活动名称
4. 选择卡片类型
5. 设置概率
6. 保存

**预期结果：**
- 活动项添加成功
- 显示在对应分类下
- 分类概率自动更新

#### TC-033: 添加活动项 - 空名称
**测试步骤：**
1. 添加活动项
2. 不输入名称
3. 尝试保存

**预期结果：**
- 显示错误提示："活动名称不能为空"
- 不允许保存

#### TC-034: 添加活动项 - 名称长度限制
**测试步骤：**
1. 添加活动项
2. 输入超过20个字符的名称

**预期结果：**
- 显示错误提示："活动名称不能超过20个字符"
- 或输入框限制输入

#### TC-035: 编辑活动项 - 基本功能
**测试步骤：**
1. 点击活动项进入编辑模式
2. 修改名称、类型或概率
3. 保存

**预期结果：**
- 活动项更新成功
- 分类概率自动更新

#### TC-036: 编辑活动项 - 取消编辑
**测试步骤：**
1. 编辑活动项
2. 按ESC键取消

**预期结果：**
- 内容恢复为原始值
- 退出编辑模式

#### TC-037: 删除活动项 - 基本功能
**测试步骤：**
1. 点击活动项的删除按钮
2. 确认删除

**预期结果：**
- 活动项被删除
- 分类概率自动更新

#### TC-038: 删除活动项 - 最后一个活动项
**测试步骤：**
1. 分类下只有一个活动项
2. 删除该活动项

**预期结果：**
- 活动项被删除
- 分类概率可能变为0
- 或不允许删除最后一个活动项

### 2.4 概率验证功能

#### TC-039: 概率验证 - 分类概率总和
**测试步骤：**
1. 修改多个分类的概率
2. 使总和超过1

**预期结果：**
- 显示错误提示
- 或自定义分类概率自动调整（可能为负）

#### TC-040: 概率验证 - 活动项概率总和
**测试步骤：**
1. 修改分类下多个活动项的概率
2. 使总和超过分类概率

**预期结果：**
- 显示错误提示："活动项概率总和不能超过分类概率"
- 或不允许保存

#### TC-041: 概率验证 - 负数概率
**测试步骤：**
1. 输入负数概率

**预期结果：**
- 显示错误提示："概率不能为负数"
- 或输入框限制输入

#### TC-042: 概率验证 - 超过1的概率
**测试步骤：**
1. 输入大于1的概率值

**预期结果：**
- 显示错误提示："概率不能超过1"
- 或输入框限制输入

### 2.5 配置重置功能

#### TC-043: 重置配置 - 基本功能
**测试步骤：**
1. 打开配置管理器
2. 点击"重置为默认配置"按钮
3. 确认重置

**预期结果：**
- 配置恢复为默认值
- 所有自定义修改被清除
- 显示成功提示

#### TC-044: 重置配置 - 取消重置
**测试步骤：**
1. 点击重置配置按钮
2. 取消重置

**预期结果：**
- 配置保持不变
- 当前修改保留

## 三、模态框交互功能

### 3.1 模态框打开和关闭

#### TC-045: 打开模态框 - 基本功能
**测试步骤：**
1. 点击"🎴 今日活动"按钮

**预期结果：**
- 模态框打开
- 显示抽卡界面
- 背景遮罩显示

#### TC-046: 关闭模态框 - 点击外部
**测试步骤：**
1. 打开模态框
2. 点击模态框外部区域

**预期结果：**
- 模态框关闭
- 状态重置

#### TC-047: 关闭模态框 - 点击关闭按钮
**测试步骤：**
1. 打开模态框
2. 点击关闭按钮（如果有）

**预期结果：**
- 模态框关闭
- 状态重置

#### TC-048: 模态框 - 点击内容区域不关闭
**测试步骤：**
1. 打开模态框
2. 点击模态框内容区域

**预期结果：**
- 模态框不关闭
- 只有点击外部区域才关闭

### 3.2 彩带特效

#### TC-049: 彩带特效 - 抽卡成功后显示
**测试步骤：**
1. 抽卡成功

**预期结果：**
- 显示彩带特效
- 3秒后自动消失
- 特效覆盖整个屏幕

#### TC-050: 彩带特效 - 自定义卡片确认后显示
**测试步骤：**
1. 抽到自定义类型
2. 输入内容并确认

**预期结果：**
- 显示彩带特效
- 2秒后自动消失

## 四、数据持久化测试

#### TC-051: 数据持久化 - 刷新页面
**测试步骤：**
1. 抽卡后刷新页面

**预期结果：**
- 今日任务卡片仍然显示
- 卡片信息正确
- 数据完整

#### TC-052: 数据持久化 - 关闭浏览器
**测试步骤：**
1. 抽卡后关闭浏览器
2. 重新打开

**预期结果：**
- 今日任务卡片仍然显示
- 数据完整

#### TC-053: 数据持久化 - 跨日期
**测试步骤：**
1. 今天抽卡
2. 等待到第二天
3. 查看今日活动

**预期结果：**
- 显示"🎴 今日活动"按钮（可以重新抽卡）
- 昨天的记录保留但不显示

## 五、边界条件和异常情况

#### TC-054: 边界条件 - 配置为空
**测试步骤：**
1. 清空所有配置
2. 尝试抽卡

**预期结果：**
- 显示错误提示
- 或使用默认配置

#### TC-055: 边界条件 - 所有分类概率为0
**测试步骤：**
1. 将所有分类概率设为0
2. 尝试抽卡

**预期结果：**
- 显示错误提示
- 或自动调整概率

#### TC-056: 边界条件 - 快速连续抽卡
**测试步骤：**
1. 快速连续点击抽卡按钮

**预期结果：**
- 只执行一次抽卡
- 防止重复抽卡

#### TC-057: 异常情况 - localStorage存储失败
**测试步骤：**
1. 模拟localStorage存储失败
2. 尝试抽卡

**预期结果：**
- 显示错误提示
- 或静默失败

#### TC-058: 异常情况 - 配置数据损坏
**测试步骤：**
1. 模拟配置数据损坏
2. 打开配置管理器

**预期结果：**
- 自动恢复为默认配置
- 或显示错误提示

## 六、UI/UX测试

#### TC-059: UI/UX - 抽卡动画
**测试步骤：**
1. 点击抽卡按钮
2. 观察抽卡动画

**预期结果：**
- 动画流畅
- 卡片翻转效果
- "抽卡中..."文字显示

#### TC-060: UI/UX - 彩带特效
**测试步骤：**
1. 抽卡成功后观察彩带特效

**预期结果：**
- 彩带数量足够（500个）
- 颜色多样
- 动画流畅
- 3秒后消失

#### TC-061: UI/UX - 模态框样式
**测试步骤：**
1. 查看模态框样式

**预期结果：**
- 背景遮罩半透明
- 内容区域居中
- 样式美观

#### TC-062: UI/UX - 响应式布局
**测试步骤：**
1. 在不同屏幕尺寸下查看

**预期结果：**
- 布局自适应
- 模态框大小合适
- 内容正常显示

#### TC-063: UI/UX - 卡片显示样式
**测试步骤：**
1. 查看今日任务卡片样式

**预期结果：**
- 卡片样式美观
- 分类和类型显示清晰
- 可点击区域明显

---

## 测试总结

### 测试覆盖范围（全部63个用例）
- ✅ 抽卡基本功能（11个用例）
- ✅ 抽卡结果显示（3个用例）
- ✅ 重置功能（4个用例）
- ✅ 活动配置管理功能（26个用例）
- ✅ 模态框交互功能（4个用例）
- ✅ 数据持久化测试（3个用例）
- ✅ 边界条件和异常情况（5个用例）
- ✅ UI/UX测试（5个用例）

**总计：63个测试用例**

### 重点测试项
1. **抽卡功能**：基本抽卡、自定义类型处理、已抽卡状态
2. **活动配置管理**：分类管理、活动项管理、概率验证
3. **数据持久化**：刷新页面、跨日期、配置保存
4. **边界条件**：配置为空、概率异常、快速操作
5. **UI/UX**：抽卡动画、彩带特效、模态框交互

### 测试完成度
✅ **今日活动模块测试用例编写完成（63个用例）**

所有功能点、配置管理、边界条件、异常情况和UI/UX均已覆盖。测试用例可用于全面测试今日活动模块的各项功能。

